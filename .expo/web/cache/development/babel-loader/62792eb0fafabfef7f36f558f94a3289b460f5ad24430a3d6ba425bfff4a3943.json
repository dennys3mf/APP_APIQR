{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport { withTiming } from \"../../animation\";\nimport { LayoutAnimationType, SharedTransitionType } from \"../animationBuilder/commonTypes\";\nimport { ReduceMotion } from \"../../commonTypes\";\nimport { configureLayoutAnimations } from \"../../core\";\nimport { ProgressTransitionManager } from \"./ProgressTransitionManager\";\nvar SUPPORTED_PROPS = ['width', 'height', 'originX', 'originY', 'transform', 'borderRadius'];\nvar _worklet_1383153354179_init_data = {\n  code: \"function anonymous(viewTag,values,progress){const{progressAnimationCallback}=this.__closure;const newStyles=progressAnimationCallback(values,progress);_notifyAboutProgress(viewTag,newStyles,true);}\",\n  location: \"C:\\\\Users\\\\Usuario\\\\proyecto05_06-tarea\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\reanimated2\\\\layoutReanimation\\\\sharedTransitions\\\\SharedTransition.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"viewTag\\\",\\\"values\\\",\\\"progress\\\",\\\"progressAnimationCallback\\\",\\\"__closure\\\",\\\"newStyles\\\",\\\"_notifyAboutProgress\\\"],\\\"sources\\\":[\\\"C:/Users/Usuario/proyecto05_06-tarea/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/SharedTransition.js\\\"],\\\"mappings\\\":\\\"AAwBoC,QAAC,CAAAA,SAAOA,CAAAC,OAAQ,CAAEC,MAAA,CAAQC,QAAK,QAAAC,yBAAA,OAAAC,SAAA,CAG7D,KAAM,CAAAC,SAAS,CAAGF,yBAAyB,CAACF,MAAM,CAAEC,QAAQ,CAAC,CAC7DI,oBAAoB,CAACN,OAAO,CAAEK,SAAS,CAAE,IAAI,CAAC,CAChD\\\"}\",\n  version: \"3.5.4\"\n};\nvar _worklet_3701396076733_init_data = {\n  code: \"function anonymous(values){const{animationFactory,SUPPORTED_PROPS,withTiming,reduceMotion,transitionDuration}=this.__closure;let animations={};const initialValues={};if(animationFactory){animations=animationFactory(values);for(const key in animations){if(!SUPPORTED_PROPS.includes(key)){throw new Error(\\\"[Reanimated] The prop '\\\"+key+\\\"' is not supported yet.\\\");}}}else{for(const propName of SUPPORTED_PROPS){if(propName==='transform'){const matrix=values.targetTransformMatrix;animations.transformMatrix=withTiming(matrix,{reduceMotion:reduceMotion,duration:transitionDuration});}else{const capitalizedPropName=\\\"\\\"+propName.charAt(0).toUpperCase()+propName.slice(1);const keyToTargetValue=\\\"target\\\"+capitalizedPropName;animations[propName]=withTiming(values[keyToTargetValue],{reduceMotion:reduceMotion,duration:transitionDuration});}}}for(const propName in animations){if(propName==='transform'){initialValues.transformMatrix=values.currentTransformMatrix;}else{const capitalizedPropName=propName.charAt(0).toUpperCase()+propName.slice(1);const keyToCurrentValue=\\\"current\\\"+capitalizedPropName;initialValues[propName]=values[keyToCurrentValue];}}return{initialValues:initialValues,animations:animations};}\",\n  location: \"C:\\\\Users\\\\Usuario\\\\proyecto05_06-tarea\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\reanimated2\\\\layoutReanimation\\\\sharedTransitions\\\\SharedTransition.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"values\\\",\\\"animationFactory\\\",\\\"SUPPORTED_PROPS\\\",\\\"withTiming\\\",\\\"reduceMotion\\\",\\\"transitionDuration\\\",\\\"__closure\\\",\\\"animations\\\",\\\"initialValues\\\",\\\"key\\\",\\\"includes\\\",\\\"Error\\\",\\\"propName\\\",\\\"matrix\\\",\\\"targetTransformMatrix\\\",\\\"transformMatrix\\\",\\\"duration\\\",\\\"capitalizedPropName\\\",\\\"charAt\\\",\\\"toUpperCase\\\",\\\"slice\\\",\\\"keyToTargetValue\\\",\\\"currentTransformMatrix\\\",\\\"keyToCurrentValue\\\"],\\\"sources\\\":[\\\"C:/Users/Usuario/proyecto05_06-tarea/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/SharedTransition.js\\\"],\\\"mappings\\\":\\\"AAgFsB,SAAAA,SAAMA,CAAIC,MAAA,QAAAC,gBAAA,CAAAC,eAAA,CAAAC,UAAA,CAAAC,YAAA,CAAAC,kBAAA,OAAAC,SAAA,CAG1B,GAAI,CAAAC,UAAU,CAAG,CAAC,CAAC,CACnB,KAAM,CAAAC,aAAa,CAAG,CAAC,CAAC,CACxB,GAAIP,gBAAgB,CAAE,CACpBM,UAAU,CAAGN,gBAAgB,CAACD,MAAM,CAAC,CACrC,IAAK,KAAM,CAAAS,GAAG,GAAI,CAAAF,UAAU,CAAE,CAC5B,GAAI,CAACL,eAAe,CAACQ,QAAQ,CAACD,GAAG,CAAC,CAAE,CAClC,KAAM,IAAI,CAAAE,KAAK,2BAA2BF,GAAI,0BAAwB,CAAC,CACzE,CACF,CACF,CAAC,IAAM,CACL,IAAK,KAAM,CAAAG,QAAQ,GAAI,CAAAV,eAAe,CAAE,CACtC,GAAIU,QAAQ,GAAK,WAAW,CAAE,CAC5B,KAAM,CAAAC,MAAM,CAAGb,MAAM,CAACc,qBAAqB,CAC3CP,UAAU,CAACQ,eAAe,CAAGZ,UAAU,CAACU,MAAM,CAAE,CAC9CT,YAAY,CAAZA,YAAY,CACZY,QAAQ,CAAEX,kBACZ,CAAC,CAAC,CACJ,CAAC,IAAM,CACL,KAAM,CAAAY,mBAAmB,IAAML,QAAQ,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAE,CAAEP,QAAQ,CAACQ,KAAK,CAAC,CAAC,CAAG,CACrF,KAAM,CAAAC,gBAAgB,UAAYJ,mBAAqB,CACvDV,UAAU,CAACK,QAAQ,CAAC,CAAGT,UAAU,CAACH,MAAM,CAACqB,gBAAgB,CAAC,CAAE,CAC1DjB,YAAY,CAAZA,YAAY,CACZY,QAAQ,CAAEX,kBACZ,CAAC,CAAC,CACJ,CACF,CACF,CACA,IAAK,KAAM,CAAAO,QAAQ,GAAI,CAAAL,UAAU,CAAE,CACjC,GAAIK,QAAQ,GAAK,WAAW,CAAE,CAC5BJ,aAAa,CAACO,eAAe,CAAGf,MAAM,CAACsB,sBAAsB,CAC/D,CAAC,IAAM,CACL,KAAM,CAAAL,mBAAmB,CAAGL,QAAQ,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGP,QAAQ,CAACQ,KAAK,CAAC,CAAC,CAAC,CAChF,KAAM,CAAAG,iBAAiB,WAAaN,mBAAqB,CACzDT,aAAa,CAACI,QAAQ,CAAC,CAAGZ,MAAM,CAACuB,iBAAiB,CAAC,CACrD,CACF,CACA,MAAO,CACLf,aAAa,CAAbA,aAAa,CACbD,UAAA,CAAAA,UACF,CAAC,CACH\\\"}\",\n  version: \"3.5.4\"\n};\nvar _worklet_17341825136347_init_data = {\n  code: \"function anonymous(viewTag,values,progress){const{SUPPORTED_PROPS}=this.__closure;const newStyles={};for(const propertyName of SUPPORTED_PROPS){if(propertyName==='transform'){const currentMatrix=values.currentTransformMatrix;const targetMatrix=values.targetTransformMatrix;const newMatrix=new Array(9);for(let i=0;i<9;i++){newMatrix[i]=progress*(targetMatrix[i]-currentMatrix[i])+currentMatrix[i];}newStyles.transformMatrix=newMatrix;}else{const PropertyName=propertyName.charAt(0).toUpperCase()+propertyName.slice(1);const currentPropertyName=\\\"current\\\"+PropertyName;const targetPropertyName=\\\"target\\\"+PropertyName;const currentValue=values[currentPropertyName];const targetValue=values[targetPropertyName];newStyles[propertyName]=progress*(targetValue-currentValue)+currentValue;}}_notifyAboutProgress(viewTag,newStyles,true);}\",\n  location: \"C:\\\\Users\\\\Usuario\\\\proyecto05_06-tarea\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\reanimated2\\\\layoutReanimation\\\\sharedTransitions\\\\SharedTransition.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"viewTag\\\",\\\"values\\\",\\\"progress\\\",\\\"SUPPORTED_PROPS\\\",\\\"__closure\\\",\\\"newStyles\\\",\\\"propertyName\\\",\\\"currentMatrix\\\",\\\"currentTransformMatrix\\\",\\\"targetMatrix\\\",\\\"targetTransformMatrix\\\",\\\"newMatrix\\\",\\\"Array\\\",\\\"i\\\",\\\"transformMatrix\\\",\\\"PropertyName\\\",\\\"charAt\\\",\\\"toUpperCase\\\",\\\"slice\\\",\\\"currentPropertyName\\\",\\\"targetPropertyName\\\",\\\"currentValue\\\",\\\"targetValue\\\",\\\"_notifyAboutProgress\\\"],\\\"sources\\\":[\\\"C:/Users/Usuario/proyecto05_06-tarea/node_modules/react-native-reanimated/lib/module/reanimated2/layoutReanimation/sharedTransitions/SharedTransition.js\\\"],\\\"mappings\\\":\\\"AAkI8B,QAAC,CAAAA,SAAOA,CAAAC,OAAQ,CAAEC,MAAA,CAAQC,QAAK,QAAAC,eAAA,OAAAC,SAAA,CAGvD,KAAM,CAAAC,SAAS,CAAG,CAAC,CAAC,CACpB,IAAK,KAAM,CAAAC,YAAY,GAAI,CAAAH,eAAe,CAAE,CAC1C,GAAIG,YAAY,GAAK,WAAW,CAAE,CAGhC,KAAM,CAAAC,aAAa,CAAGN,MAAM,CAACO,sBAAsB,CACnD,KAAM,CAAAC,YAAY,CAAGR,MAAM,CAACS,qBAAqB,CACjD,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CAAC,CAC9B,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAE,CAAE,CAC1BF,SAAS,CAACE,CAAC,CAAC,CAAGX,QAAQ,EAAIO,YAAY,CAACI,CAAC,CAAC,CAAGN,aAAa,CAACM,CAAC,CAAC,CAAC,CAAGN,aAAa,CAACM,CAAC,CAAC,CACnF,CACAR,SAAS,CAACS,eAAe,CAAGH,SAAS,CACvC,CAAC,IAAM,CAEL,KAAM,CAAAI,YAAY,CAAGT,YAAY,CAACU,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAGX,YAAY,CAACY,KAAK,CAAC,CAAC,CAAC,CACjF,KAAM,CAAAC,mBAAmB,WAAaJ,YAAc,CACpD,KAAM,CAAAK,kBAAkB,UAAYL,YAAc,CAClD,KAAM,CAAAM,YAAY,CAAGpB,MAAM,CAACkB,mBAAmB,CAAC,CAChD,KAAM,CAAAG,WAAW,CAAGrB,MAAM,CAACmB,kBAAkB,CAAC,CAC9Cf,SAAS,CAACC,YAAY,CAAC,CAAGJ,QAAQ,EAAIoB,WAAW,CAAGD,YAAY,CAAC,CAAGA,YAAY,CAClF,CACF,CACAE,oBAAoB,CAACvB,OAAO,CAAEK,SAAS,CAAE,IAAI,CAAC,CAChD\\\"}\",\n  version: \"3.5.4\"\n};\nexport var SharedTransition = function () {\n  function SharedTransition() {\n    _classCallCheck(this, SharedTransition);\n    _defineProperty(this, \"_customAnimationFactory\", null);\n    _defineProperty(this, \"_animation\", null);\n    _defineProperty(this, \"_transitionDuration\", 500);\n    _defineProperty(this, \"_reduceMotion\", ReduceMotion.System);\n    _defineProperty(this, \"_customProgressAnimation\", undefined);\n    _defineProperty(this, \"_progressAnimation\", undefined);\n    _defineProperty(this, \"_defaultTransitionType\", undefined);\n  }\n  _createClass(SharedTransition, [{\n    key: \"custom\",\n    value: function custom(customAnimationFactory) {\n      this._customAnimationFactory = customAnimationFactory;\n      return this;\n    }\n  }, {\n    key: \"progressAnimation\",\n    value: function progressAnimation(progressAnimationCallback) {\n      this._customProgressAnimation = function () {\n        var _e = [new global.Error(), -2, -27];\n        var anonymous = function anonymous(viewTag, values, progress) {\n          var newStyles = progressAnimationCallback(values, progress);\n          _notifyAboutProgress(viewTag, newStyles, true);\n        };\n        anonymous.__closure = {\n          progressAnimationCallback: progressAnimationCallback\n        };\n        anonymous.__initData = _worklet_1383153354179_init_data;\n        anonymous.__workletHash = 1383153354179;\n        anonymous.__stackDetails = _e;\n        return anonymous;\n      }();\n      return this;\n    }\n  }, {\n    key: \"duration\",\n    value: function duration(_duration) {\n      this._transitionDuration = _duration;\n      return this;\n    }\n  }, {\n    key: \"reduceMotion\",\n    value: function reduceMotion(_reduceMotion) {\n      this._reduceMotion = _reduceMotion;\n      return this;\n    }\n  }, {\n    key: \"defaultTransitionType\",\n    value: function defaultTransitionType(transitionType) {\n      this._defaultTransitionType = transitionType;\n      return this;\n    }\n  }, {\n    key: \"registerTransition\",\n    value: function registerTransition(viewTag, sharedTransitionTag) {\n      var transitionAnimation = this.getTransitionAnimation();\n      var progressAnimation = this.getProgressAnimation();\n      if (!this._defaultTransitionType) {\n        if (this._customAnimationFactory && !this._customProgressAnimation) {\n          this._defaultTransitionType = SharedTransitionType.ANIMATION;\n        } else {\n          this._defaultTransitionType = SharedTransitionType.PROGRESS_ANIMATION;\n        }\n      }\n      var layoutAnimationType = this._defaultTransitionType === SharedTransitionType.ANIMATION ? LayoutAnimationType.SHARED_ELEMENT_TRANSITION : LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;\n      configureLayoutAnimations(viewTag, layoutAnimationType, transitionAnimation, sharedTransitionTag);\n      SharedTransition._progressTransitionManager.addProgressAnimation(viewTag, progressAnimation);\n    }\n  }, {\n    key: \"unregisterTransition\",\n    value: function unregisterTransition(viewTag) {\n      SharedTransition._progressTransitionManager.removeProgressAnimation(viewTag);\n    }\n  }, {\n    key: \"getReduceMotion\",\n    value: function getReduceMotion() {\n      return this._reduceMotion;\n    }\n  }, {\n    key: \"getTransitionAnimation\",\n    value: function getTransitionAnimation() {\n      if (!this._animation) {\n        this.buildAnimation();\n      }\n      return this._animation;\n    }\n  }, {\n    key: \"getProgressAnimation\",\n    value: function getProgressAnimation() {\n      if (!this._progressAnimation) {\n        this.buildProgressAnimation();\n      }\n      return this._progressAnimation;\n    }\n  }, {\n    key: \"buildAnimation\",\n    value: function buildAnimation() {\n      var animationFactory = this._customAnimationFactory;\n      var transitionDuration = this._transitionDuration;\n      var reduceMotion = this._reduceMotion;\n      this._animation = function () {\n        var _e = [new global.Error(), -6, -27];\n        var anonymous = function anonymous(values) {\n          var animations = {};\n          var initialValues = {};\n          if (animationFactory) {\n            animations = animationFactory(values);\n            for (var key in animations) {\n              if (!SUPPORTED_PROPS.includes(key)) {\n                throw new Error(`[Reanimated] The prop '${key}' is not supported yet.`);\n              }\n            }\n          } else {\n            for (var propName of SUPPORTED_PROPS) {\n              if (propName === 'transform') {\n                var matrix = values.targetTransformMatrix;\n                animations.transformMatrix = withTiming(matrix, {\n                  reduceMotion: reduceMotion,\n                  duration: transitionDuration\n                });\n              } else {\n                var capitalizedPropName = `${propName.charAt(0).toUpperCase()}${propName.slice(1)}`;\n                var keyToTargetValue = `target${capitalizedPropName}`;\n                animations[propName] = withTiming(values[keyToTargetValue], {\n                  reduceMotion: reduceMotion,\n                  duration: transitionDuration\n                });\n              }\n            }\n          }\n          for (var _propName in animations) {\n            if (_propName === 'transform') {\n              initialValues.transformMatrix = values.currentTransformMatrix;\n            } else {\n              var _capitalizedPropName = _propName.charAt(0).toUpperCase() + _propName.slice(1);\n              var keyToCurrentValue = `current${_capitalizedPropName}`;\n              initialValues[_propName] = values[keyToCurrentValue];\n            }\n          }\n          return {\n            initialValues: initialValues,\n            animations: animations\n          };\n        };\n        anonymous.__closure = {\n          animationFactory: animationFactory,\n          SUPPORTED_PROPS: SUPPORTED_PROPS,\n          withTiming: withTiming,\n          reduceMotion: reduceMotion,\n          transitionDuration: transitionDuration\n        };\n        anonymous.__initData = _worklet_3701396076733_init_data;\n        anonymous.__workletHash = 3701396076733;\n        anonymous.__stackDetails = _e;\n        return anonymous;\n      }();\n    }\n  }, {\n    key: \"buildProgressAnimation\",\n    value: function buildProgressAnimation() {\n      if (this._customProgressAnimation) {\n        this._progressAnimation = this._customProgressAnimation;\n        return;\n      }\n      this._progressAnimation = function () {\n        var _e = [new global.Error(), -2, -27];\n        var anonymous = function anonymous(viewTag, values, progress) {\n          var newStyles = {};\n          for (var propertyName of SUPPORTED_PROPS) {\n            if (propertyName === 'transform') {\n              var currentMatrix = values.currentTransformMatrix;\n              var targetMatrix = values.targetTransformMatrix;\n              var newMatrix = new Array(9);\n              for (var i = 0; i < 9; i++) {\n                newMatrix[i] = progress * (targetMatrix[i] - currentMatrix[i]) + currentMatrix[i];\n              }\n              newStyles.transformMatrix = newMatrix;\n            } else {\n              var PropertyName = propertyName.charAt(0).toUpperCase() + propertyName.slice(1);\n              var currentPropertyName = `current${PropertyName}`;\n              var targetPropertyName = `target${PropertyName}`;\n              var currentValue = values[currentPropertyName];\n              var targetValue = values[targetPropertyName];\n              newStyles[propertyName] = progress * (targetValue - currentValue) + currentValue;\n            }\n          }\n          _notifyAboutProgress(viewTag, newStyles, true);\n        };\n        anonymous.__closure = {\n          SUPPORTED_PROPS: SUPPORTED_PROPS\n        };\n        anonymous.__initData = _worklet_17341825136347_init_data;\n        anonymous.__workletHash = 17341825136347;\n        anonymous.__stackDetails = _e;\n        return anonymous;\n      }();\n    }\n  }], [{\n    key: \"custom\",\n    value: function custom(customAnimationFactory) {\n      return new SharedTransition().custom(customAnimationFactory);\n    }\n  }, {\n    key: \"duration\",\n    value: function duration(_duration2) {\n      return new SharedTransition().duration(_duration2);\n    }\n  }, {\n    key: \"progressAnimation\",\n    value: function progressAnimation(progressAnimationCallback) {\n      return new SharedTransition().progressAnimation(progressAnimationCallback);\n    }\n  }, {\n    key: \"defaultTransitionType\",\n    value: function defaultTransitionType(transitionType) {\n      return new SharedTransition().defaultTransitionType(transitionType);\n    }\n  }, {\n    key: \"reduceMotion\",\n    value: function reduceMotion(_reduceMotion) {\n      return new SharedTransition().reduceMotion(_reduceMotion);\n    }\n  }]);\n  return SharedTransition;\n}();\n_defineProperty(SharedTransition, \"_progressTransitionManager\", new ProgressTransitionManager());","map":{"version":3,"names":["withTiming","LayoutAnimationType","SharedTransitionType","ReduceMotion","configureLayoutAnimations","ProgressTransitionManager","SUPPORTED_PROPS","_worklet_1383153354179_init_data","code","location","sourceMap","version","_worklet_3701396076733_init_data","_worklet_17341825136347_init_data","SharedTransition","_classCallCheck","_defineProperty","System","undefined","_createClass","key","value","custom","customAnimationFactory","_customAnimationFactory","progressAnimation","progressAnimationCallback","_customProgressAnimation","_e","global","Error","anonymous","viewTag","values","progress","newStyles","_notifyAboutProgress","__closure","duration","_transitionDuration","reduceMotion","_reduceMotion","defaultTransitionType","transitionType","_defaultTransitionType","registerTransition","sharedTransitionTag","transitionAnimation","getTransitionAnimation","getProgressAnimation","ANIMATION","PROGRESS_ANIMATION","layoutAnimationType","SHARED_ELEMENT_TRANSITION","SHARED_ELEMENT_TRANSITION_PROGRESS","_progressTransitionManager","addProgressAnimation","unregisterTransition","removeProgressAnimation","getReduceMotion","_animation","buildAnimation","_progressAnimation","buildProgressAnimation","animationFactory","transitionDuration","animations","initialValues","includes","propName","matrix","targetTransformMatrix","transformMatrix","capitalizedPropName","charAt","toUpperCase","slice","keyToTargetValue","currentTransformMatrix","keyToCurrentValue","__initData","__workletHash","__stackDetails","propertyName","currentMatrix","targetMatrix","newMatrix","Array","i","PropertyName","currentPropertyName","targetPropertyName","currentValue","targetValue"],"sources":["C:\\Users\\Usuario\\proyecto05_06-tarea\\node_modules\\react-native-reanimated\\lib\\module\\reanimated2\\layoutReanimation\\sharedTransitions\\SharedTransition.ts"],"sourcesContent":["import { withTiming } from '../../animation';\nimport type {\n  SharedTransitionAnimationsFunction,\n  SharedTransitionAnimationsValues,\n  CustomProgressAnimation,\n  ProgressAnimation,\n  LayoutAnimationsOptions,\n} from '../animationBuilder/commonTypes';\nimport {\n  LayoutAnimationType,\n  SharedTransitionType,\n} from '../animationBuilder/commonTypes';\nimport type { StyleProps } from '../../commonTypes';\nimport { ReduceMotion } from '../../commonTypes';\nimport { configureLayoutAnimations } from '../../core';\nimport { ProgressTransitionManager } from './ProgressTransitionManager';\n\nconst SUPPORTED_PROPS = [\n  'width',\n  'height',\n  'originX',\n  'originY',\n  'transform',\n  'borderRadius',\n] as const;\n\ntype AnimationFactory = (\n  values: SharedTransitionAnimationsValues\n) => StyleProps;\n\nexport class SharedTransition {\n  private _customAnimationFactory: AnimationFactory | null = null;\n  private _animation: SharedTransitionAnimationsFunction | null = null;\n  private _transitionDuration = 500;\n  private _reduceMotion: ReduceMotion = ReduceMotion.System;\n  private _customProgressAnimation?: ProgressAnimation = undefined;\n  private _progressAnimation?: ProgressAnimation = undefined;\n  private _defaultTransitionType?: SharedTransitionType = undefined;\n  private static _progressTransitionManager = new ProgressTransitionManager();\n\n  public custom(customAnimationFactory: AnimationFactory): SharedTransition {\n    this._customAnimationFactory = customAnimationFactory;\n    return this;\n  }\n\n  public progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    this._customProgressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles = progressAnimationCallback(values, progress);\n      _notifyAboutProgress(viewTag, newStyles, true);\n    };\n    return this;\n  }\n\n  public duration(duration: number): SharedTransition {\n    this._transitionDuration = duration;\n    return this;\n  }\n\n  public reduceMotion(_reduceMotion: ReduceMotion): this {\n    this._reduceMotion = _reduceMotion;\n    return this;\n  }\n\n  public defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    this._defaultTransitionType = transitionType;\n    return this;\n  }\n\n  public registerTransition(\n    viewTag: number,\n    sharedTransitionTag: string\n  ): void {\n    const transitionAnimation = this.getTransitionAnimation();\n    const progressAnimation = this.getProgressAnimation();\n    if (!this._defaultTransitionType) {\n      if (this._customAnimationFactory && !this._customProgressAnimation) {\n        this._defaultTransitionType = SharedTransitionType.ANIMATION;\n      } else {\n        this._defaultTransitionType = SharedTransitionType.PROGRESS_ANIMATION;\n      }\n    }\n    const layoutAnimationType =\n      this._defaultTransitionType === SharedTransitionType.ANIMATION\n        ? LayoutAnimationType.SHARED_ELEMENT_TRANSITION\n        : LayoutAnimationType.SHARED_ELEMENT_TRANSITION_PROGRESS;\n    configureLayoutAnimations(\n      viewTag,\n      layoutAnimationType,\n      transitionAnimation,\n      sharedTransitionTag\n    );\n    SharedTransition._progressTransitionManager.addProgressAnimation(\n      viewTag,\n      progressAnimation\n    );\n  }\n\n  public unregisterTransition(viewTag: number): void {\n    SharedTransition._progressTransitionManager.removeProgressAnimation(\n      viewTag\n    );\n  }\n\n  public getReduceMotion(): ReduceMotion {\n    return this._reduceMotion;\n  }\n\n  private getTransitionAnimation(): SharedTransitionAnimationsFunction {\n    if (!this._animation) {\n      this.buildAnimation();\n    }\n    return this._animation!;\n  }\n\n  private getProgressAnimation(): ProgressAnimation {\n    if (!this._progressAnimation) {\n      this.buildProgressAnimation();\n    }\n    return this._progressAnimation!;\n  }\n\n  private buildAnimation() {\n    const animationFactory = this._customAnimationFactory;\n    const transitionDuration = this._transitionDuration;\n    const reduceMotion = this._reduceMotion;\n    this._animation = (values: SharedTransitionAnimationsValues) => {\n      'worklet';\n      let animations: {\n        [key: string]: any;\n      } = {};\n      const initialValues: {\n        [key: string]: any;\n      } = {};\n\n      if (animationFactory) {\n        animations = animationFactory(values);\n        for (const key in animations) {\n          if (!(SUPPORTED_PROPS as readonly string[]).includes(key)) {\n            throw new Error(\n              `[Reanimated] The prop '${key}' is not supported yet.`\n            );\n          }\n        }\n      } else {\n        for (const propName of SUPPORTED_PROPS) {\n          if (propName === 'transform') {\n            const matrix = values.targetTransformMatrix;\n            animations.transformMatrix = withTiming(matrix, {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          } else {\n            const capitalizedPropName = `${propName\n              .charAt(0)\n              .toUpperCase()}${propName.slice(\n              1\n            )}` as Capitalize<LayoutAnimationsOptions>;\n            const keyToTargetValue = `target${capitalizedPropName}` as const;\n            animations[propName] = withTiming(values[keyToTargetValue], {\n              reduceMotion,\n              duration: transitionDuration,\n            });\n          }\n        }\n      }\n\n      for (const propName in animations) {\n        if (propName === 'transform') {\n          initialValues.transformMatrix = values.currentTransformMatrix;\n        } else {\n          const capitalizedPropName = (propName.charAt(0).toUpperCase() +\n            propName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const keyToCurrentValue = `current${capitalizedPropName}` as const;\n          initialValues[propName] = values[keyToCurrentValue];\n        }\n      }\n\n      return { initialValues, animations };\n    };\n  }\n\n  private buildProgressAnimation() {\n    if (this._customProgressAnimation) {\n      this._progressAnimation = this._customProgressAnimation;\n      return;\n    }\n    this._progressAnimation = (viewTag, values, progress) => {\n      'worklet';\n      const newStyles: { [key: string]: number | number[] } = {};\n      for (const propertyName of SUPPORTED_PROPS) {\n        if (propertyName === 'transform') {\n          // this is not the perfect solution, but at this moment it just interpolates the whole\n          // matrix instead of interpolating scale, translate, rotate, etc. separately\n          const currentMatrix = values.currentTransformMatrix as number[];\n          const targetMatrix = values.targetTransformMatrix as number[];\n          const newMatrix = new Array(9);\n          for (let i = 0; i < 9; i++) {\n            newMatrix[i] =\n              progress * (targetMatrix[i] - currentMatrix[i]) +\n              currentMatrix[i];\n          }\n          newStyles.transformMatrix = newMatrix;\n        } else {\n          // PropertyName == propertyName with capitalized fist letter, (width -> Width)\n          const PropertyName = (propertyName.charAt(0).toUpperCase() +\n            propertyName.slice(1)) as Capitalize<LayoutAnimationsOptions>;\n          const currentPropertyName = `current${PropertyName}` as const;\n          const targetPropertyName = `target${PropertyName}` as const;\n\n          const currentValue = values[currentPropertyName];\n          const targetValue = values[targetPropertyName];\n\n          newStyles[propertyName] =\n            progress * (targetValue - currentValue) + currentValue;\n        }\n      }\n      _notifyAboutProgress(viewTag, newStyles, true);\n    };\n  }\n\n  // static builder methods\n\n  public static custom(\n    customAnimationFactory: AnimationFactory\n  ): SharedTransition {\n    return new SharedTransition().custom(customAnimationFactory);\n  }\n\n  public static duration(duration: number): SharedTransition {\n    return new SharedTransition().duration(duration);\n  }\n\n  public static progressAnimation(\n    progressAnimationCallback: CustomProgressAnimation\n  ): SharedTransition {\n    return new SharedTransition().progressAnimation(progressAnimationCallback);\n  }\n\n  public static defaultTransitionType(\n    transitionType: SharedTransitionType\n  ): SharedTransition {\n    return new SharedTransition().defaultTransitionType(transitionType);\n  }\n\n  public static reduceMotion(_reduceMotion: ReduceMotion): SharedTransition {\n    return new SharedTransition().reduceMotion(_reduceMotion);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,UAAU;AAQnB,SACEC,mBAAmB,EACnBC,oBAAoB;AAGtB,SAASC,YAAY;AACrB,SAASC,yBAAyB;AAClC,SAASC,yBAAyB;AAElC,IAAMC,eAAe,GAAG,CACtB,OAAO,EACP,QAAQ,EACR,SAAS,EACT,SAAS,EACT,WAAW,EACX,cAAc,CACN;AAAA,IAAAC,gCAAA;EAAAC,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAAA,IAAAC,gCAAA;EAAAJ,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAAA,IAAAE,iCAAA;EAAAL,IAAA;EAAAC,QAAA;EAAAC,SAAA;EAAAC,OAAA;AAAA;AAMV,WAAaG,gBAAgB;EAAC,SAAAA,iBAAA;IAAAC,eAAA,OAAAD,gBAAA;IAAAE,eAAA,kCAC+B,IAAI;IAAAA,eAAA,qBACC,IAAI;IAAAA,eAAA,8BACtC,GAAG;IAAAA,eAAA,wBACKb,YAAY,CAACc,MAAM;IAAAD,eAAA,mCACFE,SAAS;IAAAF,eAAA,6BACfE,SAAS;IAAAF,eAAA,iCACFE,SAAS;EAAA;EAAAC,YAAA,CAAAL,gBAAA;IAAAM,GAAA;IAAAC,KAAA,EAG1D,SAAAC,OAAOC,sBAAwC,EAAoB;MACxE,IAAI,CAACC,uBAAuB,GAAGD,sBAAsB;MACrD,OAAO,IAAI;IACb;EAAA;IAAAH,GAAA;IAAAC,KAAA,EAEO,SAAAI,kBACLC,yBAAkD,EAChC;MAClB,IAAI,CAACC,wBAAwB;QAAA,IAAAC,EAAA,QAAAC,MAAA,CAAAC,KAAA;QAAA,IAAAC,SAAA,YAAAA,UAAIC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,EAAK;UAE7D,IAAMC,SAAS,GAAGT,yBAAyB,CAACO,MAAM,EAAEC,QAAQ,CAAC;UAC7DE,oBAAoB,CAACJ,OAAO,EAAEG,SAAS,EAAE,IAAI,CAAC;QAChD,CAAC;QAAAJ,SAAA,CAAAM,SAAA;UAAAX,yBAAA,E;;;;;;SAAA;MACD,OAAO,IAAI;IACb;EAAA;IAAAN,GAAA;IAAAC,KAAA,EAEO,SAAAiB,SAASA,SAAgB,EAAoB;MAClD,IAAI,CAACC,mBAAmB,GAAGD,SAAQ;MACnC,OAAO,IAAI;IACb;EAAA;IAAAlB,GAAA;IAAAC,KAAA,EAEO,SAAAmB,aAAaC,aAA2B,EAAQ;MACrD,IAAI,CAACA,aAAa,GAAGA,aAAa;MAClC,OAAO,IAAI;IACb;EAAA;IAAArB,GAAA;IAAAC,KAAA,EAEO,SAAAqB,sBACLC,cAAoC,EAClB;MAClB,IAAI,CAACC,sBAAsB,GAAGD,cAAc;MAC5C,OAAO,IAAI;IACb;EAAA;IAAAvB,GAAA;IAAAC,KAAA,EAEO,SAAAwB,mBACLb,OAAe,EACfc,mBAA2B,EACrB;MACN,IAAMC,mBAAmB,GAAG,IAAI,CAACC,sBAAsB,EAAE;MACzD,IAAMvB,iBAAiB,GAAG,IAAI,CAACwB,oBAAoB,EAAE;MACrD,IAAI,CAAC,IAAI,CAACL,sBAAsB,EAAE;QAChC,IAAI,IAAI,CAACpB,uBAAuB,IAAI,CAAC,IAAI,CAACG,wBAAwB,EAAE;UAClE,IAAI,CAACiB,sBAAsB,GAAG1C,oBAAoB,CAACgD,SAAS;QAC9D,CAAC,MAAM;UACL,IAAI,CAACN,sBAAsB,GAAG1C,oBAAoB,CAACiD,kBAAkB;QACvE;MACF;MACA,IAAMC,mBAAmB,GACvB,IAAI,CAACR,sBAAsB,KAAK1C,oBAAoB,CAACgD,SAAS,GAC1DjD,mBAAmB,CAACoD,yBAAyB,GAC7CpD,mBAAmB,CAACqD,kCAAkC;MAC5DlD,yBAAyB,CACvB4B,OAAO,EACPoB,mBAAmB,EACnBL,mBAAmB,EACnBD,mBAAmB,CACpB;MACDhC,gBAAgB,CAACyC,0BAA0B,CAACC,oBAAoB,CAC9DxB,OAAO,EACPP,iBAAiB,CAClB;IACH;EAAA;IAAAL,GAAA;IAAAC,KAAA,EAEO,SAAAoC,qBAAqBzB,OAAe,EAAQ;MACjDlB,gBAAgB,CAACyC,0BAA0B,CAACG,uBAAuB,CACjE1B,OAAO,CACR;IACH;EAAA;IAAAZ,GAAA;IAAAC,KAAA,EAEO,SAAAsC,gBAAA,EAAgC;MACrC,OAAO,IAAI,CAAClB,aAAa;IAC3B;EAAA;IAAArB,GAAA;IAAAC,KAAA,EAEQ,SAAA2B,uBAAA,EAA6D;MACnE,IAAI,CAAC,IAAI,CAACY,UAAU,EAAE;QACpB,IAAI,CAACC,cAAc,EAAE;MACvB;MACA,OAAO,IAAI,CAACD,UAAU;IACxB;EAAA;IAAAxC,GAAA;IAAAC,KAAA,EAEQ,SAAA4B,qBAAA,EAA0C;MAChD,IAAI,CAAC,IAAI,CAACa,kBAAkB,EAAE;QAC5B,IAAI,CAACC,sBAAsB,EAAE;MAC/B;MACA,OAAO,IAAI,CAACD,kBAAkB;IAChC;EAAA;IAAA1C,GAAA;IAAAC,KAAA,EAEQ,SAAAwC,eAAA,EAAiB;MACvB,IAAMG,gBAAgB,GAAG,IAAI,CAACxC,uBAAuB;MACrD,IAAMyC,kBAAkB,GAAG,IAAI,CAAC1B,mBAAmB;MACnD,IAAMC,YAAY,GAAG,IAAI,CAACC,aAAa;MACvC,IAAI,CAACmB,UAAU;QAAA,IAAAhC,EAAA,QAAAC,MAAA,CAAAC,KAAA;QAAA,IAAAC,SAAA,YAAAA,UAAIE,MAAwC,EAAK;UAE9D,IAAIiC,UAEH,GAAG,CAAC,CAAC;UACN,IAAMC,aAEL,GAAG,CAAC,CAAC;UAEN,IAAIH,gBAAgB,EAAE;YACpBE,UAAU,GAAGF,gBAAgB,CAAC/B,MAAM,CAAC;YACrC,KAAK,IAAMb,GAAG,IAAI8C,UAAU,EAAE;cAC5B,IAAI,CAAE5D,eAAe,CAAuB8D,QAAQ,CAAChD,GAAG,CAAC,EAAE;gBACzD,MAAM,IAAIU,KAAK,CACZ,0BAAyBV,GAAI,yBAAwB,CACvD;cACH;YACF;UACF,CAAC,MAAM;YACL,KAAK,IAAMiD,QAAQ,IAAI/D,eAAe,EAAE;cACtC,IAAI+D,QAAQ,KAAK,WAAW,EAAE;gBAC5B,IAAMC,MAAM,GAAGrC,MAAM,CAACsC,qBAAqB;gBAC3CL,UAAU,CAACM,eAAe,GAAGxE,UAAU,CAACsE,MAAM,EAAE;kBAC9C9B,YAAY,EAAZA,YAAY;kBACZF,QAAQ,EAAE2B;gBACZ,CAAC,CAAC;cACJ,CAAC,MAAM;gBACL,IAAMQ,mBAAmB,GAAI,GAAEJ,QAAQ,CACpCK,MAAM,CAAC,CAAC,CAAC,CACTC,WAAW,EAAG,GAAEN,QAAQ,CAACO,KAAK,CAC/B,CAAC,CACD,EAAwC;gBAC1C,IAAMC,gBAAgB,GAAI,SAAQJ,mBAAoB,EAAU;gBAChEP,UAAU,CAACG,QAAQ,CAAC,GAAGrE,UAAU,CAACiC,MAAM,CAAC4C,gBAAgB,CAAC,EAAE;kBAC1DrC,YAAY,EAAZA,YAAY;kBACZF,QAAQ,EAAE2B;gBACZ,CAAC,CAAC;cACJ;YACF;UACF;UAEA,KAAK,IAAMI,SAAQ,IAAIH,UAAU,EAAE;YACjC,IAAIG,SAAQ,KAAK,WAAW,EAAE;cAC5BF,aAAa,CAACK,eAAe,GAAGvC,MAAM,CAAC6C,sBAAsB;YAC/D,CAAC,MAAM;cACL,IAAML,oBAAmB,GAAIJ,SAAQ,CAACK,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAC3DN,SAAQ,CAACO,KAAK,CAAC,CAAC,CAAyC;cAC3D,IAAMG,iBAAiB,GAAI,UAASN,oBAAoB,EAAU;cAClEN,aAAa,CAACE,SAAQ,CAAC,GAAGpC,MAAM,CAAC8C,iBAAiB,CAAC;YACrD;UACF;UAEA,OAAO;YAAEZ,aAAa,EAAbA,aAAa;YAAED,UAAA,EAAAA;UAAW,CAAC;QACtC,CAAC;QAAAnC,SAAA,CAAAM,SAAA;UAAA2B,gBAAA,EA9KHA,gBACA;UAAA1D,eAAA,EAoB4BA,eAAA;UAAAN,UAAA,EAYfA,UAAA;UAAAwC,YAAA,EACbA,YAAA;UAAAyB,kBAAA,EAGEA;QAAA;QAAAlC,SAAA,CAAAiD,UAAA,GAAApE,gCAAA;QAAAmB,SAAA,CAAAkD,aAAA;QAAAlD,SAAA,CAAAmD,cAAA,GAAAtD,EAAA;QAAA,OAAAG,SAAA;MAAA,GAyIC;IACH;EAAA;IAAAX,GAAA;IAAAC,KAAA,EAEQ,SAAA0C,uBAAA,EAAyB;MAC/B,IAAI,IAAI,CAACpC,wBAAwB,EAAE;QACjC,IAAI,CAACmC,kBAAkB,GAAG,IAAI,CAACnC,wBAAwB;QACvD;MACF;MACA,IAAI,CAACmC,kBAAkB;QAAA,IAAAlC,EAAA,QAAAC,MAAA,CAAAC,KAAA;QAAA,IAAAC,SAAA,YAAAA,UAAIC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,EAAK;UAEvD,IAAMC,SAA+C,GAAG,CAAC,CAAC;UAC1D,KAAK,IAAMgD,YAAY,IAAI7E,eAAe,EAAE;YAC1C,IAAI6E,YAAY,KAAK,WAAW,EAAE;cAGhC,IAAMC,aAAa,GAAGnD,MAAM,CAAC6C,sBAAkC;cAC/D,IAAMO,YAAY,GAAGpD,MAAM,CAACsC,qBAAiC;cAC7D,IAAMe,SAAS,GAAG,IAAIC,KAAK,CAAC,CAAC,CAAC;cAC9B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;gBAC1BF,SAAS,CAACE,CAAC,CAAC,GACVtD,QAAQ,IAAImD,YAAY,CAACG,CAAC,CAAC,GAAGJ,aAAa,CAACI,CAAC,CAAC,CAAC,GAC/CJ,aAAa,CAACI,CAAC,CAAC;cACpB;cACArD,SAAS,CAACqC,eAAe,GAAGc,SAAS;YACvC,CAAC,MAAM;cAEL,IAAMG,YAAY,GAAIN,YAAY,CAACT,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GACxDQ,YAAY,CAACP,KAAK,CAAC,CAAC,CAAyC;cAC/D,IAAMc,mBAAmB,GAAI,UAASD,YAAa,EAAU;cAC7D,IAAME,kBAAkB,GAAI,SAAQF,YAAa,EAAU;cAE3D,IAAMG,YAAY,GAAG3D,MAAM,CAACyD,mBAAmB,CAAC;cAChD,IAAMG,WAAW,GAAG5D,MAAM,CAAC0D,kBAAkB,CAAC;cAE9CxD,SAAS,CAACgD,YAAY,CAAC,GACrBjD,QAAQ,IAAI2D,WAAW,GAAGD,YAAY,CAAC,GAAGA,YAAY;YAC1D;UACF;UACAxD,oBAAoB,CAACJ,OAAO,EAAEG,SAAS,EAAE,IAAI,CAAC;QAChD,CAAC;QAAAJ,SAAA,CAAAM,SAAA;UAAA/B,eAAA,E;;;;;;SAAA;IACH;EAAA;IAAAc,GAAA;IAAAC,KAAA,EAIA,SAAAC,OACEC,sBAAwC,EACtB;MAClB,OAAO,IAAIT,gBAAgB,EAAE,CAACQ,MAAM,CAACC,sBAAsB,CAAC;IAC9D;EAAA;IAAAH,GAAA;IAAAC,KAAA,EAEA,SAAAiB,SAAuBA,UAAgB,EAAoB;MACzD,OAAO,IAAIxB,gBAAgB,EAAE,CAACwB,QAAQ,CAACA,UAAQ,CAAC;IAClD;EAAA;IAAAlB,GAAA;IAAAC,KAAA,EAEA,SAAAI,kBACEC,yBAAkD,EAChC;MAClB,OAAO,IAAIZ,gBAAgB,EAAE,CAACW,iBAAiB,CAACC,yBAAyB,CAAC;IAC5E;EAAA;IAAAN,GAAA;IAAAC,KAAA,EAEA,SAAAqB,sBACEC,cAAoC,EAClB;MAClB,OAAO,IAAI7B,gBAAgB,EAAE,CAAC4B,qBAAqB,CAACC,cAAc,CAAC;IACrE;EAAA;IAAAvB,GAAA;IAAAC,KAAA,EAEA,SAAAmB,aAA2BC,aAA2B,EAAoB;MACxE,OAAO,IAAI3B,gBAAgB,EAAE,CAAC0B,YAAY,CAACC,aAAa,CAAC;IAC3D;EAAA;EAAA,OAAA3B,gBAAA;AAAA;AACDE,eAAA,CA9NYF,gBAAgB,gCAQiB,IAAIT,yBAAyB,EAAE"},"metadata":{},"sourceType":"module","externalDependencies":[]}