{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { GestureHandlerRootView, PanGestureHandler } from 'react-native-gesture-handler';\nimport { DraggableNodesContext, PanGestureRefContext } from \"./context\";\nimport EventManager, { actionSheetEventManager } from \"./eventmanager\";\nimport { RouterContext, RouterParamsContext, useRouter } from \"./hooks/use-router\";\nimport useSheetManager from \"./hooks/use-sheet-manager\";\nimport { useKeyboard } from \"./hooks/useKeyboard\";\nimport { SheetProvider, useProviderContext, useSheetIDContext } from \"./provider\";\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager } from \"./sheetmanager\";\nimport { styles } from \"./styles\";\nimport { getElevation, SUPPORTED_ORIENTATIONS } from \"./utils\";\nimport { resolveScrollRef, ScrollState } from \"./hooks/use-scroll-handlers\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default forwardRef(function ActionSheet(_a, ref) {\n  var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n  var _r = _a.animated,\n    animated = _r === void 0 ? true : _r,\n    _s = _a.closeOnPressBack,\n    closeOnPressBack = _s === void 0 ? true : _s,\n    _t = _a.springOffset,\n    springOffset = _t === void 0 ? 50 : _t,\n    _u = _a.elevation,\n    elevation = _u === void 0 ? 5 : _u,\n    _v = _a.defaultOverlayOpacity,\n    defaultOverlayOpacity = _v === void 0 ? 0.3 : _v,\n    _w = _a.overlayColor,\n    overlayColor = _w === void 0 ? 'black' : _w,\n    _x = _a.closable,\n    closable = _x === void 0 ? true : _x,\n    _y = _a.closeOnTouchBackdrop,\n    closeOnTouchBackdrop = _y === void 0 ? true : _y,\n    _z = _a.drawUnderStatusBar,\n    drawUnderStatusBar = _z === void 0 ? false : _z,\n    _0 = _a.gestureEnabled,\n    gestureEnabled = _0 === void 0 ? false : _0,\n    _1 = _a.isModal,\n    isModal = _1 === void 0 ? true : _1,\n    _2 = _a.snapPoints,\n    snapPoints = _2 === void 0 ? [100] : _2,\n    _3 = _a.initialSnapIndex,\n    initialSnapIndex = _3 === void 0 ? 0 : _3,\n    _4 = _a.overdrawEnabled,\n    overdrawEnabled = _4 === void 0 ? true : _4,\n    _5 = _a.overdrawFactor,\n    overdrawFactor = _5 === void 0 ? 15 : _5,\n    _6 = _a.overdrawSize,\n    overdrawSize = _6 === void 0 ? 100 : _6,\n    _7 = _a.zIndex,\n    zIndex = _7 === void 0 ? 999 : _7,\n    _8 = _a.keyboardHandlerEnabled,\n    keyboardHandlerEnabled = _8 === void 0 ? true : _8,\n    ExtraOverlayComponent = _a.ExtraOverlayComponent,\n    payload = _a.payload,\n    safeAreaInsets = _a.safeAreaInsets,\n    routes = _a.routes,\n    initialRoute = _a.initialRoute,\n    _onBeforeShow = _a.onBeforeShow,\n    enableRouterBackNavigation = _a.enableRouterBackNavigation,\n    onBeforeClose = _a.onBeforeClose,\n    _9 = _a.enableGesturesInScrollView,\n    enableGesturesInScrollView = _9 === void 0 ? true : _9,\n    props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\", \"enableGesturesInScrollView\"]);\n  snapPoints = snapPoints[snapPoints.length - 1] !== 100 ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n  var initialValue = useRef(-1);\n  var actionSheetHeight = useRef(0);\n  var safeAreaPaddingTop = useRef((safeAreaInsets === null || safeAreaInsets === void 0 ? void 0 : safeAreaInsets.top) || 0);\n  var internalEventManager = React.useMemo(function () {\n    return new EventManager();\n  }, []);\n  var currentContext = useProviderContext();\n  var _currentSnapIndex = useRef(initialSnapIndex);\n  var minTranslateValue = useRef(0);\n  var keyboardWasVisible = useRef(false);\n  var prevKeyboardHeight = useRef(0);\n  var id = useSheetIDContext();\n  var sheetId = props.id || id;\n  var lock = useRef(false);\n  var panViewRef = useRef();\n  var deviceContainerRef = useRef(null);\n  var isOrientationChanging = useRef(false);\n  var gestureBoundaries = useRef({});\n  var hiding = useRef(false);\n  var payloadRef = useRef(payload);\n  var initialWindowHeight = useRef(Dimensions.get('screen').height);\n  var panHandlerRef = useRef();\n  var draggableNodes = useRef([]);\n  var _10 = useState({\n      width: Dimensions.get('window').width,\n      height: Dimensions.get('window').height,\n      portrait: true,\n      paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }),\n    dimensions = _10[0],\n    setDimensions = _10[1];\n  var _11 = useSheetManager({\n      id: sheetId,\n      onHide: function onHide(data) {\n        hideSheet(undefined, data, true);\n      },\n      onBeforeShow: function onBeforeShow(data) {\n        var _a;\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow(data);\n      },\n      onContextUpdate: function onContextUpdate() {\n        if (sheetId) {\n          SheetManager.add(sheetId, currentContext);\n          SheetManager.registerRef(sheetId, currentContext, {\n            current: _getRef()\n          });\n        }\n      }\n    }),\n    visible = _11.visible,\n    setVisible = _11.setVisible;\n  var animations = useState({\n    opacity: new Animated.Value(0),\n    translateY: new Animated.Value(0),\n    underlayTranslateY: new Animated.Value(100),\n    keyboardTranslate: new Animated.Value(0),\n    routeOpacity: new Animated.Value(0)\n  })[0];\n  var router = useRouter({\n    routes: routes,\n    getRef: function getRef() {\n      return _getRef();\n    },\n    initialRoute: initialRoute,\n    onNavigate: props.onNavigate,\n    onNavigateBack: props.onNavigateBack,\n    routeOpacity: animations.routeOpacity\n  });\n  var routerRef = useRef(router);\n  payloadRef.current = payload;\n  routerRef.current = router;\n  var keyboard = useKeyboard(keyboardHandlerEnabled && visible && dimensions.height !== 0, true, function () {\n    return null;\n  }, function () {\n    if (initialValue.current === -1) {\n      return;\n    }\n  });\n  var prevSnapIndex = useRef(initialSnapIndex);\n  var draggableNodesContext = React.useMemo(function () {\n    return {\n      nodes: draggableNodes\n    };\n  }, []);\n  var notifyOffsetChange = function notifyOffsetChange(value) {\n    internalEventManager.publish('onoffsetchange', value);\n  };\n  var notifySnapIndexChanged = React.useCallback(function () {\n    var _a;\n    if (prevSnapIndex.current !== _currentSnapIndex.current) {\n      prevSnapIndex.current = _currentSnapIndex.current;\n      (_a = props.onSnapIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, _currentSnapIndex.current);\n    }\n  }, [props.onSnapIndexChange]);\n  var returnAnimation = React.useCallback(function (velocity) {\n    if (!animated) {\n      animations.translateY.setValue(initialValue.current);\n      return;\n    }\n    var config = props.openAnimationConfig;\n    var correctedValue = initialValue.current > minTranslateValue.current ? initialValue.current : 0;\n    notifyOffsetChange(correctedValue);\n    Animated.spring(animations.translateY, __assign(__assign({\n      toValue: initialValue.current,\n      useNativeDriver: true\n    }, config), {\n      velocity: typeof velocity !== 'number' ? undefined : velocity\n    })).start();\n    notifySnapIndexChanged();\n  }, [animated, props.openAnimationConfig]);\n  var keyboardAnimation = React.useCallback(function (shown) {\n    if (shown === void 0) {\n      shown = true;\n    }\n    Animated.spring(animations.keyboardTranslate, {\n      toValue: shown ? -keyboard.keyboardHeight : 0,\n      useNativeDriver: true\n    }).start();\n  }, [animated, props.openAnimationConfig, keyboard]);\n  var opacityAnimation = React.useCallback(function (opacity) {\n    Animated.timing(animations.opacity, {\n      duration: 150,\n      easing: Easing[\"in\"](Easing.ease),\n      toValue: opacity,\n      useNativeDriver: true\n    }).start();\n  }, []);\n  var hideAnimation = React.useCallback(function (vy, callback) {\n    if (!animated) {\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n      return;\n    }\n    var config = props.closeAnimationConfig;\n    opacityAnimation(0);\n    var animation = Animated.spring(animations.translateY, __assign({\n      velocity: typeof vy !== 'number' ? 3.0 : vy + 1,\n      toValue: dimensions.height * 1.3,\n      useNativeDriver: true\n    }, config));\n    animation.start();\n    setTimeout(function () {\n      animation.stop();\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n    }, 150);\n  }, [animated, dimensions.height, opacityAnimation, props.closeAnimationConfig]);\n  var getCurrentPosition = React.useCallback(function () {\n    return animations.translateY._value <= minTranslateValue.current + 5 ? 0 : animations.translateY._value;\n  }, []);\n  var getNextPosition = React.useCallback(function (snapIndex) {\n    return actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[snapIndex] / 100;\n  }, [snapPoints]);\n  var hardwareBackPressEvent = useRef();\n  var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n  useEffect(function () {\n    var listener = animations.translateY.addListener(function (value) {\n      var _a;\n      var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n      (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n      if (drawUnderStatusBar) {\n        if (lock.current) return;\n        var correctedHeight = keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height;\n        var correctedOffset = keyboard.keyboardShown ? value.value - keyboard.keyboardHeight : value.value;\n        if (actionSheetHeight.current > correctedHeight - 1) {\n          if (correctedOffset < 100) {\n            animations.underlayTranslateY.setValue(Math.max(correctedOffset, 0));\n          } else {\n            if (animations.underlayTranslateY._value < 100) {\n              animations.underlayTranslateY.setValue(100);\n            }\n          }\n        }\n      }\n    });\n    return function () {\n      listener && animations.translateY.removeListener(listener);\n    };\n  }, [props === null || props === void 0 ? void 0 : props.id, dimensions.height, keyboard.keyboardShown, keyboard.keyboardHeight]);\n  var onDeviceLayoutReset = useRef({});\n  var onDeviceLayout = React.useCallback(function (event) {\n    var _a;\n    var windowDimensions = Dimensions.get('window');\n    var isPortraitMode = windowDimensions.height > windowDimensions.width;\n    if (isOrientationChanging.current) return;\n    if (keyboard.keyboardShown && !isModal) {\n      return;\n    }\n    var deviceHeight = isModal ? windowDimensions.height : event.nativeEvent.layout.height;\n    var deviceWidth = isModal ? windowDimensions.width : event.nativeEvent.layout.width;\n    isPortraitMode = deviceHeight > deviceWidth;\n    (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    onDeviceLayoutReset.current.sub = internalEventManager.subscribe('safeAreaLayout', function () {\n      var _a, _b;\n      (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddingTop.current < 30 ? 30 : safeAreaPaddingTop.current : StatusBar.currentHeight || 0;\n      var height = deviceHeight - safeMarginFromTop;\n      var width = deviceWidth;\n      if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === ((_b = dimensions.height) === null || _b === void 0 ? void 0 : _b.toFixed(0)) && (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0) && dimensions.portrait === isPortraitMode) {\n        return;\n      }\n      setDimensions({\n        width: isPortraitMode ? width : height,\n        height: isPortraitMode ? height : width,\n        portrait: isPortraitMode\n      });\n    });\n    clearTimeout(onDeviceLayoutReset.current.timer);\n    if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n      internalEventManager.publish('safeAreaLayout');\n    }\n  }, [keyboard.keyboardShown, isModal, internalEventManager, dimensions.width, dimensions.portrait, dimensions.height]);\n  var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n    if (hiding.current) return;\n    if (!closable && !isSheetManagerOrRef) {\n      returnAnimation(vy);\n      return;\n    }\n    hiding.current = true;\n    onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose(data || payloadRef.current || data);\n    setTimeout(function () {\n      hideAnimation(vy, function (_a) {\n        var _b, _c;\n        var finished = _a.finished;\n        if (finished) {\n          if (closable) {\n            setVisible(false);\n            if (props.onClose) {\n              (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || payloadRef.current || data);\n              hiding.current = false;\n            }\n            (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n            if (sheetId) {\n              SheetManager.remove(sheetId, currentContext);\n              hiding.current = false;\n              actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n            } else {\n              hiding.current = false;\n            }\n            _currentSnapIndex.current = initialSnapIndex;\n          } else {\n            returnAnimation();\n          }\n        }\n      });\n    }, 1);\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'auto';\n      document.documentElement.style.overflowY = 'auto';\n    }\n  }, [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n  var onHardwareBackPress = React.useCallback(function () {\n    var _a, _b;\n    if (visible && enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return true;\n    }\n    if (visible && closable && closeOnPressBack) {\n      hideSheet();\n      return true;\n    }\n    return false;\n  }, [closable, closeOnPressBack, hideSheet, enableRouterBackNavigation, visible]);\n  var snapForward = React.useCallback(function (vy) {\n    if (_currentSnapIndex.current === snapPoints.length - 1) {\n      initialValue.current = getNextPosition(_currentSnapIndex.current);\n      returnAnimation(vy);\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    if (getCurrentPosition() === 0) {\n      nextSnapPoint = snapPoints[nextSnapIndex = snapPoints.length - 1];\n    } else {\n      for (var i = _currentSnapIndex.current; i < snapPoints.length; i++) {\n        if (getNextPosition(i) < getCurrentPosition()) {\n          nextSnapPoint = snapPoints[nextSnapIndex = i];\n          break;\n        }\n      }\n    }\n    if (nextSnapPoint > 100) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    _currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(_currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n  var snapBackward = React.useCallback(function (vy) {\n    if (_currentSnapIndex.current === 0) {\n      if (closable) {\n        initialValue.current = dimensions.height * 1.3;\n        hideSheet(vy);\n      } else {\n        initialValue.current = getNextPosition(_currentSnapIndex.current);\n        returnAnimation(vy);\n      }\n      return;\n    }\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n    for (var i = _currentSnapIndex.current; i > -1; i--) {\n      if (getNextPosition(i) > getCurrentPosition()) {\n        nextSnapPoint = snapPoints[nextSnapIndex = i];\n        break;\n      }\n    }\n    if (nextSnapPoint < 0) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n    _currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(_currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [closable, dimensions.height, getCurrentPosition, getNextPosition, hideSheet, returnAnimation, snapPoints]);\n  function getRectBoundary(rect) {\n    if (rect) {\n      var w = rect.w,\n        h = rect.h,\n        px = rect.px,\n        py = rect.py;\n      return __assign(__assign({}, rect), {\n        boundryX: px + w,\n        boundryY: py + h\n      });\n    }\n    return {\n      w: 0,\n      h: 0,\n      px: 0,\n      py: 0,\n      x: 0,\n      y: 0,\n      boundryX: 0,\n      boundryY: 0\n    };\n  }\n  var getActiveDraggableNodes = React.useCallback(function (absoluteX, absoluteY) {\n    var _a;\n    if (((_a = draggableNodes.current) === null || _a === void 0 ? void 0 : _a.length) === 0) return [];\n    var activeNodes = [];\n    for (var _i = 0, _b = draggableNodes.current; _i < _b.length; _i++) {\n      var node = _b[_i];\n      var rect = getRectBoundary(node.rect.current);\n      if (rect.boundryX === 0 && rect.boundryY === 0) continue;\n      if (absoluteX > rect.px && absoluteY > rect.py && absoluteX < rect.boundryX && absoluteY < rect.boundryY) {\n        activeNodes.push({\n          rectWithBoundry: rect,\n          node: node\n        });\n      }\n    }\n    return activeNodes;\n  }, []);\n  var panHandlers = React.useMemo(function () {\n    var velocity = 0;\n    var prevDeltaY = 0;\n    var offsets = [];\n    var deltaYBeforeMovable = 0;\n    var lockGesture = false;\n    var offsetAtDownGestureStart = 0;\n    var gestureEventCounter = 0;\n    var isScrollingGesture = false;\n    return Platform.OS === 'web' ? {\n      enabled: false\n    } : {\n      onGestureEvent: function onGestureEvent(event) {\n        var _a;\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return;\n        var gesture = event.nativeEvent;\n        var deltaY = gesture.translationY;\n        var swipingDown = prevDeltaY < deltaY;\n        var activeDraggableNodes = getActiveDraggableNodes(event.nativeEvent.absoluteX, event.nativeEvent.absoluteY);\n        var isFullOpen = getCurrentPosition() === 0;\n        var blockSwipeGesture = false;\n        if (activeDraggableNodes.length > 0) {\n          if (isFullOpen) {\n            if (swipingDown) {\n              for (var _i = 0, activeDraggableNodes_1 = activeDraggableNodes; _i < activeDraggableNodes_1.length; _i++) {\n                var node = activeDraggableNodes_1[_i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y === ScrollState.END) {\n                  deltaYBeforeMovable = deltaY;\n                  blockSwipeGesture = true;\n                  if (!offsetAtDownGestureStart) {\n                    offsetAtDownGestureStart = node.node.offset.current.y || 0;\n                  }\n                  continue;\n                }\n                if (y === 0 && node.node.handlerConfig.hasRefreshControl) {\n                  var refreshControlBounds = node.rectWithBoundry.py + node.rectWithBoundry.h * node.node.handlerConfig.refreshControlBoundary;\n                  if (!refreshControlBounds) continue;\n                  if (event.nativeEvent.absoluteY < refreshControlBounds) {\n                    lockGesture = true;\n                    blockSwipeGesture = false;\n                    continue;\n                  } else {\n                    blockSwipeGesture = false;\n                    continue;\n                  }\n                }\n                if (y > 5) {\n                  deltaYBeforeMovable = deltaY;\n                  blockSwipeGesture = true;\n                  if (!offsetAtDownGestureStart) {\n                    offsetAtDownGestureStart = node.node.offset.current.y || 0;\n                  }\n                  continue;\n                }\n              }\n            } else {\n              for (var _b = 0, activeDraggableNodes_2 = activeDraggableNodes; _b < activeDraggableNodes_2.length; _b++) {\n                var node = activeDraggableNodes_2[_b];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y > 0) {\n                  deltaYBeforeMovable = deltaY;\n                  blockSwipeGesture = true;\n                  offsetAtDownGestureStart = 0;\n                  continue;\n                }\n              }\n            }\n          }\n        }\n        gestureEventCounter++;\n        if (blockSwipeGesture || lockGesture) {\n          isScrollingGesture = true;\n          return;\n        }\n        var startY = event.nativeEvent.y - event.nativeEvent.translationY;\n        if (!enableGesturesInScrollView && startY > 100) {\n          return;\n        }\n        if (gestureEventCounter < 2) {\n          return;\n        }\n        if (swipingDown || !isFullOpen) {\n          if (Platform.OS === 'ios') {\n            for (var i = 0; i < draggableNodes.current.length; i++) {\n              var node = draggableNodes.current[i];\n              var scrollRef = resolveScrollRef(node.ref);\n              if (!offsets[i]) {\n                offsets[i] = ((_a = node.offset.current) === null || _a === void 0 ? void 0 : _a.y) || 0;\n              }\n              scrollRef.scrollTo({\n                x: 0,\n                y: offsets[i],\n                animated: false\n              });\n            }\n          }\n        }\n        if (isScrollingGesture && !swipingDown) {\n          return;\n        }\n        isScrollingGesture = false;\n        if (Platform.OS === 'ios') {\n          deltaY = deltaY - offsetAtDownGestureStart;\n        } else {\n          deltaY = deltaY - deltaYBeforeMovable;\n        }\n        var value = initialValue.current + deltaY;\n        velocity = 1;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n        if (correctedValue / overdrawFactor >= overdrawSize && deltaY <= 0) {\n          return;\n        }\n        animations.translateY.setValue(value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value);\n      },\n      failOffsetX: [-20, 20],\n      activeOffsetY: [-5, 5],\n      onEnded: function onEnded() {\n        offsets = [];\n        offsetAtDownGestureStart = 0;\n        isScrollingGesture = false;\n        gestureEventCounter = 0;\n        lockGesture = false;\n        deltaYBeforeMovable = 0;\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(1);\n          velocity = 0;\n          return;\n        }\n        if (!isMovingUp) {\n          snapBackward(velocity);\n        } else {\n          snapForward(velocity);\n        }\n        velocity = 0;\n      },\n      enabled: gestureEnabled\n    };\n  }, [animations.translateY, currentContext, gestureEnabled, getActiveDraggableNodes, getCurrentPosition, overdrawEnabled, overdrawFactor, overdrawSize, returnAnimation, sheetId, snapBackward, snapForward, springOffset]);\n  var handlers = React.useMemo(function () {\n    var prevDeltaY = 0;\n    var lockGesture = false;\n    var offsets = [];\n    var xyCache;\n    var offsetAtDownGestureStart = 0;\n    return !gestureEnabled || Platform.OS !== 'web' ? {\n      panHandlers: {}\n    } : PanResponder.create({\n      onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder(_event, gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n        var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n        if (vy < 0.05 || vx > 0.05) {\n          return false;\n        }\n        var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n        for (var _i = 0, activeDraggableNodes_3 = activeDraggableNodes; _i < activeDraggableNodes_3.length; _i++) {\n          var node = activeDraggableNodes_3[_i];\n          var scrollRef = resolveScrollRef(node.node.ref);\n          offsets.push(scrollRef.scrollTop);\n        }\n        return true;\n      },\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(_event, _gesture) {\n        if (sheetId && !isRenderedOnTop(sheetId, currentContext)) return false;\n        var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n        for (var _i = 0, activeDraggableNodes_4 = activeDraggableNodes; _i < activeDraggableNodes_4.length; _i++) {\n          var node = activeDraggableNodes_4[_i];\n          var scrollRef = resolveScrollRef(node.node.ref);\n          offsets.push(scrollRef.scrollTop);\n        }\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(_event, gesture) {\n        var deltaY = gesture.dy;\n        var swipingDown = prevDeltaY < deltaY;\n        prevDeltaY = deltaY;\n        var isFullOpen = getCurrentPosition() === 0;\n        var blockSwipeGesture = false;\n        if (!isFullOpen && !xyCache) {\n          xyCache = {\n            x: _event.nativeEvent.pageX,\n            y: _event.nativeEvent.pageY\n          };\n        }\n        var activeDraggableNodes = getActiveDraggableNodes(xyCache ? xyCache.x : _event.nativeEvent.pageX, xyCache ? xyCache.y : _event.nativeEvent.pageY);\n        if (activeDraggableNodes.length > 0) {\n          if (isFullOpen) {\n            if (swipingDown) {\n              for (var i = 0; i < activeDraggableNodes.length; i++) {\n                var node = activeDraggableNodes[i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y === ScrollState.END) {\n                  blockSwipeGesture = true;\n                  var scrollRef = resolveScrollRef(node.node.ref);\n                  offsets[i] = scrollRef.scrollTop;\n                  if (!offsetAtDownGestureStart) {\n                    offsetAtDownGestureStart = scrollRef.scrollTop;\n                  }\n                  continue;\n                }\n                if (y === 0 && node.node.handlerConfig.hasRefreshControl) {\n                  var refreshControlBounds = node.rectWithBoundry.py + node.rectWithBoundry.h * node.node.handlerConfig.refreshControlBoundary;\n                  if (!refreshControlBounds) continue;\n                  if (_event.nativeEvent.pageY < refreshControlBounds) {\n                    lockGesture = true;\n                    blockSwipeGesture = false;\n                    continue;\n                  } else {\n                    blockSwipeGesture = false;\n                    continue;\n                  }\n                }\n                if (y > 5) {\n                  blockSwipeGesture = true;\n                  var scrollRef = resolveScrollRef(node.node.ref);\n                  offsets[i] = scrollRef.scrollTop;\n                  if (!offsetAtDownGestureStart) {\n                    offsetAtDownGestureStart = scrollRef.scrollTop;\n                  }\n                  continue;\n                }\n              }\n            } else {\n              for (var i = 0; i < activeDraggableNodes.length; i++) {\n                var node = activeDraggableNodes[i];\n                if (!node.node.offset.current) continue;\n                var y = node.node.offset.current.y;\n                if (y > -1) {\n                  blockSwipeGesture = true;\n                  continue;\n                }\n              }\n            }\n          } else {\n            for (var i = 0; i < activeDraggableNodes.length; i++) {\n              var node = activeDraggableNodes[i];\n              var scrollRef = resolveScrollRef(node.node.ref);\n              scrollRef.scrollTop = offsets[i];\n            }\n          }\n        }\n        if (blockSwipeGesture || lockGesture) {\n          return;\n        }\n        var startY = gesture.moveY - gesture.dy;\n        if (!enableGesturesInScrollView && startY > 100) {\n          return;\n        }\n        deltaY = deltaY - offsetAtDownGestureStart;\n        var value = initialValue.current + deltaY;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n        if (correctedValue / overdrawFactor >= overdrawSize && gesture.dy <= 0) {\n          return;\n        }\n        animations.translateY.setValue(value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value);\n      },\n      onPanResponderEnd: function onPanResponderEnd(_event, gesture) {\n        xyCache = undefined;\n        offsets = [];\n        prevDeltaY = 0;\n        offsetAtDownGestureStart = 0;\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(gesture.vy);\n          return;\n        }\n        if (!isMovingUp) {\n          snapBackward(gesture.vy);\n        } else {\n          snapForward(gesture.vy);\n        }\n      }\n    });\n  }, [gestureEnabled, sheetId, currentContext, getActiveDraggableNodes, getCurrentPosition, overdrawFactor, overdrawSize, animations.translateY, overdrawEnabled, springOffset, returnAnimation, snapBackward, snapForward]);\n  var onTouch = function onTouch() {\n    if (enableRouterBackNavigation && router.canGoBack()) {\n      router.goBack();\n      return;\n    }\n    if (closeOnTouchBackdrop && closable) {\n      hideSheet();\n    }\n  };\n  var onSheetLayout = React.useCallback(function (event) {\n    var _a;\n    if (isOrientationChanging.current) return;\n    var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddingTop.current < 30 ? 30 : safeAreaPaddingTop.current : StatusBar.currentHeight || 0;\n    var windowDimensions = Dimensions.get('window');\n    var height = windowDimensions.height - safeMarginFromTop;\n    var orientationChanged = dimensions.portrait !== windowDimensions.width < windowDimensions.height;\n    if (orientationChanged) isOrientationChanging.current = true;\n    (_a = deviceContainerRef.current) === null || _a === void 0 ? void 0 : _a.setNativeProps({\n      style: {\n        height: Dimensions.get('screen').height - safeMarginFromTop\n      }\n    });\n    setDimensions(function (dim) {\n      return __assign(__assign({}, dim), {\n        height: height,\n        portrait: windowDimensions.width < windowDimensions.height\n      });\n    });\n    actionSheetHeight.current = event.nativeEvent.layout.height > height ? height : event.nativeEvent.layout.height;\n    minTranslateValue.current = height - actionSheetHeight.current;\n    if (initialValue.current < 0) {\n      animations.translateY.setValue(height * 1.1);\n    }\n    var nextInitialValue = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[_currentSnapIndex.current] / 100;\n    initialValue.current = (keyboard.keyboardShown || keyboardWasVisible.current) && initialValue.current <= nextInitialValue && initialValue.current >= minTranslateValue.current ? initialValue.current : nextInitialValue;\n    var wasVisible = keyboardWasVisible.current;\n    if (keyboard.keyboardShown) {\n      keyboardAnimation();\n      keyboardWasVisible.current = true;\n      prevKeyboardHeight.current = keyboard.keyboardHeight;\n    } else {\n      keyboardWasVisible.current = false;\n    }\n    opacityAnimation(1);\n    if (!wasVisible || keyboard.keyboardShown) {\n      setTimeout(function () {\n        returnAnimation();\n      }, 1);\n    } else {\n      keyboardAnimation(false);\n      returnAnimation();\n    }\n    if (isOrientationChanging.current) {\n      setTimeout(function () {\n        isOrientationChanging.current = false;\n      }, 300);\n    }\n    if (initialValue.current > 100) {\n      if (lock.current) return;\n      animations.underlayTranslateY.setValue(100);\n    }\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'hidden';\n      document.documentElement.style.overflowY = 'hidden';\n    }\n  }, [snapPoints, keyboard.keyboardShown, keyboard.keyboardHeight, opacityAnimation, returnAnimation, keyboardAnimation, animations.translateY, animations.underlayTranslateY, dimensions.portrait]);\n  var _getRef = useCallback(function () {\n    return {\n      show: function show(snapIndex) {\n        var _a;\n        if (typeof snapIndex === 'number') {\n          _currentSnapIndex.current = snapIndex;\n        }\n        _onBeforeShow === null || _onBeforeShow === void 0 ? void 0 : _onBeforeShow();\n        (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n        setVisible(true);\n      },\n      hide: function hide(data) {\n        hideSheet(undefined, data, true);\n      },\n      setModalVisible: function setModalVisible(_visible) {\n        if (_visible) {\n          setVisible(true);\n        } else {\n          hideSheet();\n        }\n      },\n      snapToOffset: function snapToOffset(offset) {\n        initialValue.current = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * offset / 100;\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToRelativeOffset: function snapToRelativeOffset(offset) {\n        if (offset === 0) {\n          _getRef().snapToIndex(_currentSnapIndex.current);\n          return;\n        }\n        var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n        initialValue.current = initialValue.current + initialValue.current * (offset / 100);\n        if (initialValue.current > availableHeight) {\n          _getRef().snapToOffset(100);\n          return;\n        }\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToIndex: function snapToIndex(index) {\n        if (index > snapPoints.length || index < 0) return;\n        _currentSnapIndex.current = index;\n        initialValue.current = getNextPosition(index);\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n        notifySnapIndexChanged();\n      },\n      handleChildScrollEnd: function handleChildScrollEnd() {\n        console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n      },\n      modifyGesturesForLayout: function modifyGesturesForLayout(_id, layout, scrollOffset) {\n        gestureBoundaries.current[_id] = __assign(__assign({}, layout), {\n          scrollOffset: scrollOffset\n        });\n      },\n      currentSnapIndex: function currentSnapIndex() {\n        return _currentSnapIndex.current;\n      },\n      isGestureEnabled: function isGestureEnabled() {\n        return gestureEnabled;\n      },\n      isOpen: function isOpen() {\n        return visible;\n      },\n      ev: internalEventManager\n    };\n  }, [internalEventManager, setVisible, hideSheet, animations.translateY, props.openAnimationConfig, snapPoints.length, getNextPosition, gestureEnabled, visible, _onBeforeShow, notifySnapIndexChanged]);\n  useImperativeHandle(ref, _getRef, [_getRef]);\n  useEffect(function () {\n    if (sheetId) {\n      SheetManager.registerRef(sheetId, currentContext, {\n        current: _getRef()\n      });\n    }\n  }, [currentContext, _getRef, sheetId]);\n  var onRequestClose = React.useCallback(function () {\n    var _a, _b;\n    if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n      (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n      return;\n    }\n    if (visible && closeOnPressBack) {\n      hideSheet();\n    }\n  }, [hideSheet, enableRouterBackNavigation, closeOnPressBack, visible]);\n  var rootProps = React.useMemo(function () {\n    var _a, _b;\n    return isModal && !props.backgroundInteractionEnabled ? {\n      visible: true,\n      animationType: 'none',\n      testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n      supportedOrientations: SUPPORTED_ORIENTATIONS,\n      onShow: props.onOpen,\n      onRequestClose: onRequestClose,\n      transparent: true,\n      statusBarTranslucent: true\n    } : {\n      testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n      onLayout: function onLayout() {\n        var _a;\n        hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n        (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      style: {\n        position: 'absolute',\n        zIndex: zIndex ? zIndex : sheetId ? getZIndexFromStack(sheetId, currentContext) : 999,\n        width: '100%',\n        height: initialWindowHeight.current\n      },\n      pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'\n    };\n  }, [currentContext, isModal, onHardwareBackPress, onRequestClose, props, zIndex, sheetId]);\n  var renderRoute = useCallback(function (route) {\n    var _a;\n    var RouteComponent = route.component;\n    return _jsx(Animated.View, {\n      style: {\n        display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n        opacity: animations.routeOpacity\n      },\n      children: _jsx(RouterParamsContext.Provider, {\n        value: route === null || route === void 0 ? void 0 : route.params,\n        children: _jsx(RouteComponent, {\n          router: router,\n          params: route === null || route === void 0 ? void 0 : route.params,\n          payload: payloadRef.current\n        })\n      })\n    }, route.name);\n  }, [animations.routeOpacity, router]);\n  var getPaddingBottom = function getPaddingBottom() {\n    var _a, _b, _c, _d, _e;\n    if (!props.useBottomSafeAreaPadding && !props.containerStyle) return 0;\n    var topPadding = !props.useBottomSafeAreaPadding ? 0 : Platform.OS === 'android' ? StatusBar.currentHeight && StatusBar.currentHeight > 35 ? 35 : StatusBar.currentHeight : (safeAreaPaddingTop.current || 0) > 30 ? 30 : safeAreaPaddingTop.current;\n    if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n      return ((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) || props.containerStyle.padding || 0;\n    }\n    if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n      return topPadding;\n    }\n    if (typeof ((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string') return props.containerStyle.paddingBottom;\n    if (typeof ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string') return props.containerStyle.padding;\n    if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n      return topPadding + props.containerStyle.paddingBottom;\n    }\n    if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n      return topPadding + props.containerStyle.padding;\n    }\n    return topPadding;\n  };\n  var paddingBottom = getPaddingBottom() || 0;\n  var context = {\n    ref: panHandlerRef,\n    eventManager: internalEventManager\n  };\n  return _jsxs(_Fragment, {\n    children: [Platform.OS === 'ios' && !safeAreaInsets ? _jsx(SafeAreaView, {\n      pointerEvents: \"none\",\n      collapsable: false,\n      onLayout: function onLayout(event) {\n        var height = event.nativeEvent.layout.height;\n        if (height !== undefined) {\n          safeAreaPaddingTop.current = height;\n          clearTimeout(onDeviceLayoutReset.current.timer);\n          onDeviceLayoutReset.current.timer = setTimeout(function () {\n            internalEventManager.publish('safeAreaLayout');\n          }, 64);\n        }\n      },\n      style: {\n        position: 'absolute',\n        width: 1,\n        left: 0,\n        top: 0,\n        backgroundColor: 'transparent'\n      },\n      children: _jsx(View, {})\n    }) : null, visible ? _jsx(Root, _objectSpread(_objectSpread({}, rootProps), {}, {\n      children: _jsx(GestureHandlerRoot, {\n        isModal: isModal,\n        style: styles.parentContainer,\n        children: _jsx(PanGestureRefContext.Provider, {\n          value: context,\n          children: _jsx(DraggableNodesContext.Provider, {\n            value: draggableNodesContext,\n            children: _jsxs(Animated.View, {\n              onLayout: onDeviceLayout,\n              ref: deviceContainerRef,\n              pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto',\n              style: [styles.parentContainer, {\n                opacity: animations.opacity,\n                width: '100%',\n                justifyContent: 'flex-end',\n                transform: [{\n                  translateY: animations.keyboardTranslate\n                }]\n              }],\n              children: [!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? _jsx(TouchableOpacity, _objectSpread({\n                onPress: onTouch,\n                activeOpacity: defaultOverlayOpacity,\n                testID: (_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop,\n                style: {\n                  height: dimensions.height + (safeAreaPaddingTop.current || 0) + 100,\n                  width: '100%',\n                  position: 'absolute',\n                  backgroundColor: overlayColor,\n                  opacity: defaultOverlayOpacity\n                }\n              }, props.backdropProps ? props.backdropProps : {})) : null, _jsxs(Animated.View, {\n                pointerEvents: \"box-none\",\n                style: __assign(__assign({\n                  borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10,\n                  borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10,\n                  backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white',\n                  borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined,\n                  borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined,\n                  borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined,\n                  width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%'\n                }, getElevation(typeof elevation === 'number' ? elevation : 5)), {\n                  flex: undefined,\n                  height: dimensions.height,\n                  maxHeight: dimensions.height,\n                  paddingBottom: keyboard.keyboardShown ? keyboard.keyboardHeight || 0 : 0,\n                  transform: [{\n                    translateY: animations.translateY\n                  }]\n                }),\n                children: [dimensions.height === 0 ? null : _jsx(PanGestureHandler, _objectSpread(_objectSpread({}, panHandlers), {}, {\n                  ref: panHandlerRef,\n                  children: _jsxs(Animated.View, _objectSpread(_objectSpread({}, handlers.panHandlers), {}, {\n                    onLayout: onSheetLayout,\n                    ref: panViewRef,\n                    testID: (_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet,\n                    style: [styles.container, {\n                      borderTopRightRadius: 10,\n                      borderTopLeftRadius: 10\n                    }, props.containerStyle, {\n                      paddingBottom: keyboard.keyboardShown && typeof paddingBottom !== 'string' ? paddingBottom + 2 : paddingBottom,\n                      maxHeight: keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height\n                    }],\n                    children: [drawUnderStatusBar ? _jsx(Animated.View, {\n                      style: {\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                        width: '100%',\n                        borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                        transform: [{\n                          translateY: animations.underlayTranslateY\n                        }]\n                      }\n                    }) : null, gestureEnabled || props.headerAlwaysVisible ? props.CustomHeaderComponent ? props.CustomHeaderComponent : _jsx(Animated.View, {\n                      style: [styles.indicator, props.indicatorStyle]\n                    }) : null, (router === null || router === void 0 ? void 0 : router.hasRoutes()) ? _jsx(RouterContext.Provider, {\n                      value: router,\n                      children: router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)\n                    }) : props === null || props === void 0 ? void 0 : props.children]\n                  }))\n                })), overdrawEnabled ? _jsx(Animated.View, {\n                  style: {\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n                    width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width\n                  }\n                }) : null]\n              }), ExtraOverlayComponent, props.withNestedSheetProvider, sheetId ? _jsx(SheetProvider, {\n                context: \"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")\n              }) : null]\n            })\n          })\n        })\n      })\n    })) : null]\n  });\n});\nvar GestureHandlerRoot = function GestureHandlerRoot(props) {\n  return props.isModal ? _jsx(GestureHandlerRootView, {\n    style: props.style,\n    children: props.children\n  }) : _jsx(_Fragment, {\n    children: props.children\n  });\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","React","forwardRef","useCallback","useEffect","useImperativeHandle","useRef","useState","Animated","BackHandler","Dimensions","Easing","Modal","PanResponder","Platform","SafeAreaView","StatusBar","TouchableOpacity","View","GestureHandlerRootView","PanGestureHandler","DraggableNodesContext","PanGestureRefContext","EventManager","actionSheetEventManager","RouterContext","RouterParamsContext","useRouter","useSheetManager","useKeyboard","SheetProvider","useProviderContext","useSheetIDContext","getZIndexFromStack","isRenderedOnTop","SheetManager","styles","getElevation","SUPPORTED_ORIENTATIONS","resolveScrollRef","ScrollState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ActionSheet","_a","ref","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","animated","_s","closeOnPressBack","_t","springOffset","_u","elevation","_v","defaultOverlayOpacity","_w","overlayColor","_x","closable","_y","closeOnTouchBackdrop","_z","drawUnderStatusBar","_0","gestureEnabled","_1","isModal","_2","snapPoints","_3","initialSnapIndex","_4","overdrawEnabled","_5","overdrawFactor","_6","overdrawSize","_7","zIndex","_8","keyboardHandlerEnabled","ExtraOverlayComponent","payload","safeAreaInsets","routes","initialRoute","onBeforeShow","enableRouterBackNavigation","onBeforeClose","_9","enableGesturesInScrollView","props","initialValue","actionSheetHeight","safeAreaPaddingTop","top","internalEventManager","useMemo","currentContext","currentSnapIndex","minTranslateValue","keyboardWasVisible","prevKeyboardHeight","id","sheetId","lock","panViewRef","deviceContainerRef","isOrientationChanging","gestureBoundaries","hiding","payloadRef","initialWindowHeight","get","height","panHandlerRef","draggableNodes","_10","width","portrait","paddingBottom","useBottomSafeAreaPadding","dimensions","setDimensions","_11","onHide","data","hideSheet","undefined","routerRef","current","initialNavigation","onContextUpdate","add","registerRef","getRef","visible","setVisible","animations","opacity","Value","translateY","underlayTranslateY","keyboardTranslate","routeOpacity","router","onNavigate","onNavigateBack","keyboard","prevSnapIndex","draggableNodesContext","nodes","notifyOffsetChange","value","publish","notifySnapIndexChanged","onSnapIndexChange","returnAnimation","velocity","setValue","config","openAnimationConfig","correctedValue","spring","toValue","useNativeDriver","start","keyboardAnimation","shown","keyboardHeight","opacityAnimation","timing","duration","easing","ease","hideAnimation","vy","callback","finished","closeAnimationConfig","animation","setTimeout","stop","getCurrentPosition","_value","getNextPosition","snapIndex","hardwareBackPressEvent","Root","backgroundInteractionEnabled","listener","addListener","onChange","correctedHeight","keyboardShown","correctedOffset","Math","max","removeListener","onDeviceLayoutReset","onDeviceLayout","event","windowDimensions","isPortraitMode","deviceHeight","nativeEvent","layout","deviceWidth","sub","unsubscribe","subscribe","safeMarginFromTop","OS","currentHeight","toFixed","clearTimeout","timer","isSheetManagerOrRef","onClose","remove","document","body","style","overflowY","documentElement","onHardwareBackPress","canGoBack","goBack","snapForward","nextSnapPoint","nextSnapIndex","console","warn","snapBackward","getRectBoundary","rect","w","h","px","py","boundryX","boundryY","x","y","getActiveDraggableNodes","absoluteX","absoluteY","activeNodes","_i","node","push","rectWithBoundry","panHandlers","prevDeltaY","offsets","deltaYBeforeMovable","lockGesture","offsetAtDownGestureStart","gestureEventCounter","isScrollingGesture","enabled","onGestureEvent","gesture","deltaY","translationY","swipingDown","activeDraggableNodes","isFullOpen","blockSwipeGesture","activeDraggableNodes_1","offset","END","handlerConfig","hasRefreshControl","refreshControlBounds","refreshControlBoundary","activeDraggableNodes_2","startY","scrollRef","scrollTo","failOffsetX","activeOffsetY","onEnded","isMovingUp","handlers","xyCache","create","onMoveShouldSetPanResponder","_event","vx","pageX","pageY","activeDraggableNodes_3","scrollTop","onStartShouldSetPanResponder","_gesture","activeDraggableNodes_4","onPanResponderMove","dy","moveY","onPanResponderEnd","onTouch","onSheetLayout","orientationChanged","setNativeProps","dim","nextInitialValue","wasVisible","show","hide","setModalVisible","_visible","snapToOffset","snapToRelativeOffset","snapToIndex","availableHeight","index","handleChildScrollEnd","modifyGesturesForLayout","_id","scrollOffset","isGestureEnabled","isOpen","ev","onRequestClose","rootProps","animationType","testID","testIDs","modal","supportedOrientations","onShow","onOpen","transparent","statusBarTranslucent","root","onLayout","addEventListener","position","pointerEvents","renderRoute","route","RouteComponent","component","display","name","currentRoute","children","Provider","params","getPaddingBottom","containerStyle","topPadding","padding","context","eventManager","collapsable","left","backgroundColor","_objectSpread","GestureHandlerRoot","parentContainer","justifyContent","transform","onPress","activeOpacity","backdrop","backdropProps","borderTopRightRadius","borderTopLeftRadius","borderBottomLeftRadius","borderBottomRightRadius","borderRadius","flex","maxHeight","sheet","container","headerAlwaysVisible","CustomHeaderComponent","indicator","indicatorStyle","hasRoutes","stack","map","bottom","withNestedSheetProvider"],"sources":["C:/Users/Usuario/Laboratorios-DAM/proyecto05_06-tarea - copia/node_modules/react-native-actions-sheet/dist/src/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/* eslint-disable curly */\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState, } from 'react';\nimport { Animated, BackHandler, Dimensions, Easing, Modal, PanResponder, Platform, SafeAreaView, StatusBar, TouchableOpacity, View, } from 'react-native';\nimport { GestureHandlerRootView, PanGestureHandler, } from 'react-native-gesture-handler';\nimport { DraggableNodesContext, PanGestureRefContext, } from './context';\nimport EventManager, { actionSheetEventManager } from './eventmanager';\nimport { RouterContext, RouterParamsContext, useRouter, } from './hooks/use-router';\nimport useSheetManager from './hooks/use-sheet-manager';\nimport { useKeyboard } from './hooks/useKeyboard';\nimport { SheetProvider, useProviderContext, useSheetIDContext } from './provider';\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager, } from './sheetmanager';\nimport { styles } from './styles';\nimport { getElevation, SUPPORTED_ORIENTATIONS } from './utils';\nimport { resolveScrollRef, ScrollState } from './hooks/use-scroll-handlers';\nexport default forwardRef(function ActionSheet(_a, ref) {\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;\n    var _r = _a.animated, animated = _r === void 0 ? true : _r, _s = _a.closeOnPressBack, closeOnPressBack = _s === void 0 ? true : _s, _t = _a.springOffset, springOffset = _t === void 0 ? 50 : _t, _u = _a.elevation, elevation = _u === void 0 ? 5 : _u, _v = _a.defaultOverlayOpacity, defaultOverlayOpacity = _v === void 0 ? 0.3 : _v, _w = _a.overlayColor, overlayColor = _w === void 0 ? 'black' : _w, _x = _a.closable, closable = _x === void 0 ? true : _x, _y = _a.closeOnTouchBackdrop, closeOnTouchBackdrop = _y === void 0 ? true : _y, _z = _a.drawUnderStatusBar, drawUnderStatusBar = _z === void 0 ? false : _z, _0 = _a.gestureEnabled, gestureEnabled = _0 === void 0 ? false : _0, _1 = _a.isModal, isModal = _1 === void 0 ? true : _1, _2 = _a.snapPoints, snapPoints = _2 === void 0 ? [100] : _2, _3 = _a.initialSnapIndex, initialSnapIndex = _3 === void 0 ? 0 : _3, _4 = _a.overdrawEnabled, overdrawEnabled = _4 === void 0 ? true : _4, _5 = _a.overdrawFactor, overdrawFactor = _5 === void 0 ? 15 : _5, _6 = _a.overdrawSize, overdrawSize = _6 === void 0 ? 100 : _6, _7 = _a.zIndex, zIndex = _7 === void 0 ? 999 : _7, _8 = _a.keyboardHandlerEnabled, keyboardHandlerEnabled = _8 === void 0 ? true : _8, ExtraOverlayComponent = _a.ExtraOverlayComponent, payload = _a.payload, safeAreaInsets = _a.safeAreaInsets, routes = _a.routes, initialRoute = _a.initialRoute, onBeforeShow = _a.onBeforeShow, enableRouterBackNavigation = _a.enableRouterBackNavigation, onBeforeClose = _a.onBeforeClose, _9 = _a.enableGesturesInScrollView, enableGesturesInScrollView = _9 === void 0 ? true : _9, props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\", \"payload\", \"safeAreaInsets\", \"routes\", \"initialRoute\", \"onBeforeShow\", \"enableRouterBackNavigation\", \"onBeforeClose\", \"enableGesturesInScrollView\"]);\n    snapPoints =\n        snapPoints[snapPoints.length - 1] !== 100\n            ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n    var initialValue = useRef(-1);\n    var actionSheetHeight = useRef(0);\n    var safeAreaPaddingTop = useRef((safeAreaInsets === null || safeAreaInsets === void 0 ? void 0 : safeAreaInsets.top) || 0);\n    var internalEventManager = React.useMemo(function () { return new EventManager(); }, []);\n    var currentContext = useProviderContext();\n    var currentSnapIndex = useRef(initialSnapIndex);\n    var minTranslateValue = useRef(0);\n    var keyboardWasVisible = useRef(false);\n    var prevKeyboardHeight = useRef(0);\n    var id = useSheetIDContext();\n    var sheetId = props.id || id;\n    var lock = useRef(false);\n    var panViewRef = useRef();\n    var deviceContainerRef = useRef(null);\n    var isOrientationChanging = useRef(false);\n    var gestureBoundaries = useRef({});\n    var hiding = useRef(false);\n    var payloadRef = useRef(payload);\n    var initialWindowHeight = useRef(Dimensions.get('screen').height);\n    var panHandlerRef = useRef();\n    var draggableNodes = useRef([]);\n    var _10 = useState({\n        width: Dimensions.get('window').width,\n        height: Dimensions.get('window').height,\n        portrait: true,\n        paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }), dimensions = _10[0], setDimensions = _10[1];\n    var _11 = useSheetManager({\n        id: sheetId,\n        onHide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        onBeforeShow: function (data) {\n            var _a;\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow(data);\n        },\n        onContextUpdate: function () {\n            if (sheetId) {\n                SheetManager.add(sheetId, currentContext);\n                SheetManager.registerRef(sheetId, currentContext, {\n                    current: getRef()\n                });\n            }\n        }\n    }), visible = _11.visible, setVisible = _11.setVisible;\n    var animations = useState({\n        opacity: new Animated.Value(0),\n        translateY: new Animated.Value(0),\n        underlayTranslateY: new Animated.Value(100),\n        keyboardTranslate: new Animated.Value(0),\n        routeOpacity: new Animated.Value(0)\n    })[0];\n    var router = useRouter({\n        routes: routes,\n        getRef: function () { return getRef(); },\n        initialRoute: initialRoute,\n        onNavigate: props.onNavigate,\n        onNavigateBack: props.onNavigateBack,\n        routeOpacity: animations.routeOpacity\n    });\n    var routerRef = useRef(router);\n    payloadRef.current = payload;\n    routerRef.current = router;\n    var keyboard = useKeyboard(keyboardHandlerEnabled && visible && dimensions.height !== 0, true, function () { return null; }, function () {\n        // Don't run `hideKeyboard` callback if the `showKeyboard` hasn't ran yet.\n        // Fix a race condition when you open a action sheet while you have the keyboard opened.\n        if (initialValue.current === -1) {\n            return;\n        }\n    });\n    var prevSnapIndex = useRef(initialSnapIndex);\n    var draggableNodesContext = React.useMemo(function () { return ({\n        nodes: draggableNodes\n    }); }, []);\n    var notifyOffsetChange = function (value) {\n        internalEventManager.publish('onoffsetchange', value);\n    };\n    var notifySnapIndexChanged = React.useCallback(function () {\n        var _a;\n        if (prevSnapIndex.current !== currentSnapIndex.current) {\n            prevSnapIndex.current = currentSnapIndex.current;\n            (_a = props.onSnapIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, currentSnapIndex.current);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.onSnapIndexChange]);\n    var returnAnimation = React.useCallback(function (velocity) {\n        if (!animated) {\n            animations.translateY.setValue(initialValue.current);\n            return;\n        }\n        var config = props.openAnimationConfig;\n        var correctedValue = initialValue.current > minTranslateValue.current\n            ? initialValue.current\n            : 0;\n        notifyOffsetChange(correctedValue);\n        Animated.spring(animations.translateY, __assign(__assign({ toValue: initialValue.current, useNativeDriver: true }, config), { velocity: typeof velocity !== 'number' ? undefined : velocity })).start();\n        notifySnapIndexChanged();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig]);\n    var keyboardAnimation = React.useCallback(function (shown) {\n        if (shown === void 0) { shown = true; }\n        Animated.spring(animations.keyboardTranslate, {\n            toValue: shown ? -keyboard.keyboardHeight : 0,\n            useNativeDriver: true\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig, keyboard]);\n    var opacityAnimation = React.useCallback(function (opacity) {\n        Animated.timing(animations.opacity, {\n            duration: 150,\n            easing: Easing[\"in\"](Easing.ease),\n            toValue: opacity,\n            useNativeDriver: true\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    var hideAnimation = React.useCallback(function (vy, callback) {\n        if (!animated) {\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n            return;\n        }\n        var config = props.closeAnimationConfig;\n        opacityAnimation(0);\n        var animation = Animated.spring(animations.translateY, __assign({ velocity: typeof vy !== 'number' ? 3.0 : vy + 1, toValue: dimensions.height * 1.3, useNativeDriver: true }, config));\n        animation.start();\n        setTimeout(function () {\n            animation.stop();\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n        }, 150);\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        animated,\n        dimensions.height,\n        opacityAnimation,\n        props.closeAnimationConfig,\n    ]);\n    var getCurrentPosition = React.useCallback(function () {\n        //@ts-ignore\n        return animations.translateY._value <= minTranslateValue.current + 5\n            ? 0\n            : //@ts-ignore\n                animations.translateY._value;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    var getNextPosition = React.useCallback(function (snapIndex) {\n        return (actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[snapIndex]) / 100);\n    }, [snapPoints]);\n    var hardwareBackPressEvent = useRef();\n    var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n    useEffect(function () {\n        var listener = animations.translateY.addListener(function (value) {\n            var _a;\n            var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n            (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n            if (drawUnderStatusBar) {\n                if (lock.current)\n                    return;\n                var correctedHeight = keyboard.keyboardShown\n                    ? dimensions.height - keyboard.keyboardHeight\n                    : dimensions.height;\n                var correctedOffset = keyboard.keyboardShown\n                    ? value.value - keyboard.keyboardHeight\n                    : value.value;\n                if (actionSheetHeight.current > correctedHeight - 1) {\n                    if (correctedOffset < 100) {\n                        animations.underlayTranslateY.setValue(Math.max(correctedOffset, 0));\n                    }\n                    else {\n                        //@ts-ignore\n                        if (animations.underlayTranslateY._value < 100) {\n                            animations.underlayTranslateY.setValue(100);\n                        }\n                    }\n                }\n            }\n        });\n        return function () {\n            listener && animations.translateY.removeListener(listener);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        props === null || props === void 0 ? void 0 : props.id,\n        dimensions.height,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n    ]);\n    var onDeviceLayoutReset = useRef({});\n    var onDeviceLayout = React.useCallback(function (event) {\n        var _a;\n        var windowDimensions = Dimensions.get('window');\n        var isPortraitMode = windowDimensions.height > windowDimensions.width;\n        if (isOrientationChanging.current)\n            return;\n        if (keyboard.keyboardShown && !isModal) {\n            return;\n        }\n        // If this is a modal, simply use window dimensions\n        // for a more accurate height value for the action sheet.\n        var deviceHeight = isModal\n            ? windowDimensions.height\n            : event.nativeEvent.layout.height;\n        var deviceWidth = isModal\n            ? windowDimensions.width\n            : event.nativeEvent.layout.width;\n        isPortraitMode = deviceHeight > deviceWidth;\n        (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n        onDeviceLayoutReset.current.sub = internalEventManager.subscribe('safeAreaLayout', function () {\n            var _a, _b;\n            (_a = onDeviceLayoutReset.current.sub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n            var safeMarginFromTop = Platform.OS === 'ios'\n                ? safeAreaPaddingTop.current < 30\n                    ? 30\n                    : safeAreaPaddingTop.current\n                : StatusBar.currentHeight || 0;\n            var height = deviceHeight - safeMarginFromTop;\n            var width = deviceWidth;\n            if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === ((_b = dimensions.height) === null || _b === void 0 ? void 0 : _b.toFixed(0)) &&\n                (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0) &&\n                dimensions.portrait === isPortraitMode) {\n                return;\n            }\n            setDimensions({\n                width: isPortraitMode ? width : height,\n                height: isPortraitMode ? height : width,\n                portrait: isPortraitMode\n            });\n        });\n        clearTimeout(onDeviceLayoutReset.current.timer);\n        if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n            internalEventManager.publish('safeAreaLayout');\n        }\n    }, [\n        keyboard.keyboardShown,\n        isModal,\n        internalEventManager,\n        dimensions.width,\n        dimensions.portrait,\n        dimensions.height,\n    ]);\n    var hideSheet = React.useCallback(function (vy, data, isSheetManagerOrRef) {\n        if (hiding.current)\n            return;\n        if (!closable && !isSheetManagerOrRef) {\n            returnAnimation(vy);\n            return;\n        }\n        hiding.current = true;\n        onBeforeClose === null || onBeforeClose === void 0 ? void 0 : onBeforeClose(data || payloadRef.current || data);\n        setTimeout(function () {\n            hideAnimation(vy, function (_a) {\n                var _b, _c;\n                var finished = _a.finished;\n                if (finished) {\n                    if (closable) {\n                        setVisible(false);\n                        if (props.onClose) {\n                            (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || payloadRef.current || data);\n                            hiding.current = false;\n                        }\n                        (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n                        if (sheetId) {\n                            SheetManager.remove(sheetId, currentContext);\n                            hiding.current = false;\n                            actionSheetEventManager.publish(\"onclose_\".concat(sheetId), data || payloadRef.current || data, currentContext);\n                        }\n                        else {\n                            hiding.current = false;\n                        }\n                        currentSnapIndex.current = initialSnapIndex;\n                    }\n                    else {\n                        returnAnimation();\n                    }\n                }\n            });\n        }, 1);\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'auto';\n            document.documentElement.style.overflowY = 'auto';\n        }\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n    var onHardwareBackPress = React.useCallback(function () {\n        var _a, _b;\n        if (visible &&\n            enableRouterBackNavigation &&\n            ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return true;\n        }\n        if (visible && closable && closeOnPressBack) {\n            hideSheet();\n            return true;\n        }\n        return false;\n    }, [\n        closable,\n        closeOnPressBack,\n        hideSheet,\n        enableRouterBackNavigation,\n        visible,\n    ]);\n    /**\n     * Snap towards the top\n     */\n    var snapForward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === snapPoints.length - 1) {\n            initialValue.current = getNextPosition(currentSnapIndex.current);\n            returnAnimation(vy);\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        if (getCurrentPosition() === 0) {\n            nextSnapPoint = snapPoints[(nextSnapIndex = snapPoints.length - 1)];\n        }\n        else {\n            for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n                if (getNextPosition(i) < getCurrentPosition()) {\n                    nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                    break;\n                }\n            }\n        }\n        if (nextSnapPoint > 100) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n    /**\n     * Snap towards the bottom\n     */\n    var snapBackward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === 0) {\n            if (closable) {\n                initialValue.current = dimensions.height * 1.3;\n                hideSheet(vy);\n            }\n            else {\n                initialValue.current = getNextPosition(currentSnapIndex.current);\n                returnAnimation(vy);\n            }\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        for (var i = currentSnapIndex.current; i > -1; i--) {\n            if (getNextPosition(i) > getCurrentPosition()) {\n                nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                break;\n            }\n        }\n        if (nextSnapPoint < 0) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [\n        closable,\n        dimensions.height,\n        getCurrentPosition,\n        getNextPosition,\n        hideSheet,\n        returnAnimation,\n        snapPoints,\n    ]);\n    function getRectBoundary(rect) {\n        if (rect) {\n            var w = rect.w, h = rect.h, px = rect.px, py = rect.py;\n            return __assign(__assign({}, rect), { boundryX: px + w, boundryY: py + h });\n        }\n        return { w: 0, h: 0, px: 0, py: 0, x: 0, y: 0, boundryX: 0, boundryY: 0 };\n    }\n    var getActiveDraggableNodes = React.useCallback(function (absoluteX, absoluteY) {\n        var _a;\n        if (((_a = draggableNodes.current) === null || _a === void 0 ? void 0 : _a.length) === 0)\n            return [];\n        var activeNodes = [];\n        for (var _i = 0, _b = draggableNodes.current; _i < _b.length; _i++) {\n            var node = _b[_i];\n            var rect = getRectBoundary(node.rect.current);\n            if (rect.boundryX === 0 && rect.boundryY === 0)\n                continue;\n            if (absoluteX > rect.px &&\n                absoluteY > rect.py &&\n                absoluteX < rect.boundryX &&\n                absoluteY < rect.boundryY) {\n                activeNodes.push({\n                    rectWithBoundry: rect,\n                    node: node\n                });\n            }\n        }\n        return activeNodes;\n    }, []);\n    var panHandlers = React.useMemo(function () {\n        var velocity = 0;\n        var prevDeltaY = 0;\n        var offsets = [];\n        var deltaYBeforeMovable = 0;\n        var lockGesture = false;\n        var offsetAtDownGestureStart = 0;\n        var gestureEventCounter = 0;\n        var isScrollingGesture = false;\n        return Platform.OS === 'web'\n            ? { enabled: false }\n            : {\n                onGestureEvent: function (event) {\n                    var _a;\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return;\n                    var gesture = event.nativeEvent;\n                    var deltaY = gesture.translationY;\n                    var swipingDown = prevDeltaY < deltaY;\n                    var activeDraggableNodes = getActiveDraggableNodes(event.nativeEvent.absoluteX, event.nativeEvent.absoluteY);\n                    var isFullOpen = getCurrentPosition() === 0;\n                    var blockSwipeGesture = false;\n                    if (activeDraggableNodes.length > 0) {\n                        if (isFullOpen) {\n                            if (swipingDown) {\n                                for (var _i = 0, activeDraggableNodes_1 = activeDraggableNodes; _i < activeDraggableNodes_1.length; _i++) {\n                                    var node = activeDraggableNodes_1[_i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y === ScrollState.END) {\n                                        deltaYBeforeMovable = deltaY;\n                                        blockSwipeGesture = true;\n                                        if (!offsetAtDownGestureStart) {\n                                            offsetAtDownGestureStart =\n                                                node.node.offset.current.y || 0;\n                                        }\n                                        continue;\n                                    }\n                                    if (y === 0 &&\n                                        node.node.handlerConfig.hasRefreshControl) {\n                                        // Refresh Control will work in to 15% area of the DraggableNode.\n                                        var refreshControlBounds = node.rectWithBoundry.py +\n                                            node.rectWithBoundry.h *\n                                                node.node.handlerConfig.refreshControlBoundary;\n                                        if (!refreshControlBounds)\n                                            continue;\n                                        if (event.nativeEvent.absoluteY < refreshControlBounds) {\n                                            lockGesture = true;\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                        else {\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                    }\n                                    if (y > 5) {\n                                        deltaYBeforeMovable = deltaY;\n                                        blockSwipeGesture = true;\n                                        if (!offsetAtDownGestureStart) {\n                                            offsetAtDownGestureStart =\n                                                node.node.offset.current.y || 0;\n                                        }\n                                        continue;\n                                    }\n                                }\n                            }\n                            else {\n                                for (var _b = 0, activeDraggableNodes_2 = activeDraggableNodes; _b < activeDraggableNodes_2.length; _b++) {\n                                    var node = activeDraggableNodes_2[_b];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y > 0) {\n                                        deltaYBeforeMovable = deltaY;\n                                        blockSwipeGesture = true;\n                                        offsetAtDownGestureStart = 0;\n                                        continue;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    gestureEventCounter++;\n                    if (blockSwipeGesture || lockGesture) {\n                        isScrollingGesture = true;\n                        return;\n                    }\n                    var startY = event.nativeEvent.y - event.nativeEvent.translationY;\n                    if (!enableGesturesInScrollView && startY > 100) {\n                        return;\n                    }\n                    if (gestureEventCounter < 2) {\n                        return;\n                    }\n                    if (swipingDown || !isFullOpen) {\n                        if (Platform.OS === 'ios') {\n                            for (var i = 0; i < draggableNodes.current.length; i++) {\n                                var node = draggableNodes.current[i];\n                                var scrollRef = resolveScrollRef(node.ref);\n                                if (!offsets[i]) {\n                                    offsets[i] = ((_a = node.offset.current) === null || _a === void 0 ? void 0 : _a.y) || 0;\n                                }\n                                scrollRef.scrollTo({\n                                    x: 0,\n                                    y: offsets[i],\n                                    animated: false\n                                });\n                            }\n                        }\n                    }\n                    if (isScrollingGesture && !swipingDown) {\n                        return;\n                    }\n                    isScrollingGesture = false;\n                    if (Platform.OS === 'ios') {\n                        deltaY = deltaY - offsetAtDownGestureStart;\n                    }\n                    else {\n                        deltaY = deltaY - deltaYBeforeMovable;\n                    }\n                    var value = initialValue.current + deltaY;\n                    velocity = 1;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        deltaY <= 0) {\n                        return;\n                    }\n                    animations.translateY.setValue(value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value);\n                },\n                failOffsetX: [-20, 20],\n                activeOffsetY: [-5, 5],\n                onEnded: function () {\n                    offsets = [];\n                    offsetAtDownGestureStart = 0;\n                    isScrollingGesture = false;\n                    gestureEventCounter = 0;\n                    lockGesture = false;\n                    deltaYBeforeMovable = 0;\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    if ((!isMovingUp &&\n                        getCurrentPosition() < initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(1);\n                        velocity = 0;\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(velocity);\n                    }\n                    else {\n                        snapForward(velocity);\n                    }\n                    velocity = 0;\n                },\n                enabled: gestureEnabled\n            };\n    }, [\n        animations.translateY,\n        currentContext,\n        gestureEnabled,\n        getActiveDraggableNodes,\n        getCurrentPosition,\n        overdrawEnabled,\n        overdrawFactor,\n        overdrawSize,\n        returnAnimation,\n        sheetId,\n        snapBackward,\n        snapForward,\n        springOffset,\n    ]);\n    var handlers = React.useMemo(function () {\n        var prevDeltaY = 0;\n        var lockGesture = false;\n        var offsets = [];\n        var xyCache;\n        var offsetAtDownGestureStart = 0;\n        return !gestureEnabled || Platform.OS !== 'web'\n            ? { panHandlers: {} }\n            : PanResponder.create({\n                onMoveShouldSetPanResponder: function (_event, gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n                    var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n                    if (vy < 0.05 || vx > 0.05) {\n                        return false;\n                    }\n                    var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n                    for (var _i = 0, activeDraggableNodes_3 = activeDraggableNodes; _i < activeDraggableNodes_3.length; _i++) {\n                        var node = activeDraggableNodes_3[_i];\n                        var scrollRef = resolveScrollRef(node.node.ref);\n                        offsets.push(scrollRef.scrollTop);\n                    }\n                    return true;\n                },\n                onStartShouldSetPanResponder: function (_event, _gesture) {\n                    if (sheetId && !isRenderedOnTop(sheetId, currentContext))\n                        return false;\n                    var activeDraggableNodes = getActiveDraggableNodes(_event.nativeEvent.pageX, _event.nativeEvent.pageY);\n                    for (var _i = 0, activeDraggableNodes_4 = activeDraggableNodes; _i < activeDraggableNodes_4.length; _i++) {\n                        var node = activeDraggableNodes_4[_i];\n                        var scrollRef = resolveScrollRef(node.node.ref);\n                        offsets.push(scrollRef.scrollTop);\n                    }\n                    return true;\n                },\n                onPanResponderMove: function (_event, gesture) {\n                    var deltaY = gesture.dy;\n                    var swipingDown = prevDeltaY < deltaY;\n                    prevDeltaY = deltaY;\n                    var isFullOpen = getCurrentPosition() === 0;\n                    var blockSwipeGesture = false;\n                    if (!isFullOpen && !xyCache) {\n                        xyCache = {\n                            x: _event.nativeEvent.pageX,\n                            y: _event.nativeEvent.pageY\n                        };\n                    }\n                    var activeDraggableNodes = getActiveDraggableNodes(xyCache ? xyCache.x : _event.nativeEvent.pageX, xyCache ? xyCache.y : _event.nativeEvent.pageY);\n                    if (activeDraggableNodes.length > 0) {\n                        if (isFullOpen) {\n                            if (swipingDown) {\n                                for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                    var node = activeDraggableNodes[i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y === ScrollState.END) {\n                                        blockSwipeGesture = true;\n                                        var scrollRef = resolveScrollRef(node.node.ref);\n                                        offsets[i] = scrollRef.scrollTop;\n                                        if (!offsetAtDownGestureStart) {\n                                            offsetAtDownGestureStart = scrollRef.scrollTop;\n                                        }\n                                        continue;\n                                    }\n                                    if (y === 0 &&\n                                        node.node.handlerConfig.hasRefreshControl) {\n                                        // Refresh Control will work in to 15% area of the DraggableNode.\n                                        var refreshControlBounds = node.rectWithBoundry.py +\n                                            node.rectWithBoundry.h *\n                                                node.node.handlerConfig.refreshControlBoundary;\n                                        if (!refreshControlBounds)\n                                            continue;\n                                        if (_event.nativeEvent.pageY < refreshControlBounds) {\n                                            lockGesture = true;\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                        else {\n                                            blockSwipeGesture = false;\n                                            continue;\n                                        }\n                                    }\n                                    if (y > 5) {\n                                        blockSwipeGesture = true;\n                                        var scrollRef = resolveScrollRef(node.node.ref);\n                                        offsets[i] = scrollRef.scrollTop;\n                                        if (!offsetAtDownGestureStart) {\n                                            offsetAtDownGestureStart = scrollRef.scrollTop;\n                                        }\n                                        continue;\n                                    }\n                                }\n                            }\n                            else {\n                                for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                    var node = activeDraggableNodes[i];\n                                    if (!node.node.offset.current)\n                                        continue;\n                                    var y = node.node.offset.current.y;\n                                    if (y > -1) {\n                                        blockSwipeGesture = true;\n                                        continue;\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < activeDraggableNodes.length; i++) {\n                                var node = activeDraggableNodes[i];\n                                var scrollRef = resolveScrollRef(node.node.ref);\n                                scrollRef.scrollTop = offsets[i];\n                            }\n                        }\n                    }\n                    if (blockSwipeGesture || lockGesture) {\n                        return;\n                    }\n                    var startY = gesture.moveY - gesture.dy;\n                    if (!enableGesturesInScrollView && startY > 100) {\n                        return;\n                    }\n                    deltaY = deltaY - offsetAtDownGestureStart;\n                    var value = initialValue.current + deltaY;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        gesture.dy <= 0) {\n                        return;\n                    }\n                    animations.translateY.setValue(value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value);\n                },\n                onPanResponderEnd: function (_event, gesture) {\n                    xyCache = undefined;\n                    offsets = [];\n                    prevDeltaY = 0;\n                    offsetAtDownGestureStart = 0;\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    if ((!isMovingUp &&\n                        getCurrentPosition() < initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(gesture.vy);\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(gesture.vy);\n                    }\n                    else {\n                        snapForward(gesture.vy);\n                    }\n                }\n            });\n    }, [\n        gestureEnabled,\n        sheetId,\n        currentContext,\n        getActiveDraggableNodes,\n        getCurrentPosition,\n        overdrawFactor,\n        overdrawSize,\n        animations.translateY,\n        overdrawEnabled,\n        springOffset,\n        returnAnimation,\n        snapBackward,\n        snapForward,\n    ]);\n    var onTouch = function () {\n        if (enableRouterBackNavigation && router.canGoBack()) {\n            router.goBack();\n            return;\n        }\n        if (closeOnTouchBackdrop && closable) {\n            hideSheet();\n        }\n    };\n    var onSheetLayout = React.useCallback(function (event) {\n        var _a;\n        if (isOrientationChanging.current)\n            return;\n        var safeMarginFromTop = Platform.OS === 'ios'\n            ? safeAreaPaddingTop.current < 30\n                ? 30\n                : safeAreaPaddingTop.current\n            : StatusBar.currentHeight || 0;\n        var windowDimensions = Dimensions.get('window');\n        var height = windowDimensions.height - safeMarginFromTop;\n        var orientationChanged = dimensions.portrait !==\n            windowDimensions.width < windowDimensions.height;\n        if (orientationChanged)\n            isOrientationChanging.current = true;\n        (_a = deviceContainerRef.current) === null || _a === void 0 ? void 0 : _a.setNativeProps({\n            style: {\n                height: Dimensions.get('screen').height - safeMarginFromTop\n            }\n        });\n        setDimensions(function (dim) {\n            return __assign(__assign({}, dim), { height: height, portrait: windowDimensions.width < windowDimensions.height });\n        });\n        actionSheetHeight.current =\n            event.nativeEvent.layout.height > height\n                ? height\n                : event.nativeEvent.layout.height;\n        minTranslateValue.current = height - actionSheetHeight.current;\n        if (initialValue.current < 0) {\n            animations.translateY.setValue(height * 1.1);\n        }\n        var nextInitialValue = actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[currentSnapIndex.current]) /\n                100;\n        initialValue.current =\n            (keyboard.keyboardShown || keyboardWasVisible.current) &&\n                initialValue.current <= nextInitialValue &&\n                initialValue.current >= minTranslateValue.current\n                ? initialValue.current\n                : nextInitialValue;\n        var wasVisible = keyboardWasVisible.current;\n        if (keyboard.keyboardShown) {\n            keyboardAnimation();\n            keyboardWasVisible.current = true;\n            prevKeyboardHeight.current = keyboard.keyboardHeight;\n        }\n        else {\n            keyboardWasVisible.current = false;\n        }\n        opacityAnimation(1);\n        if (!wasVisible || keyboard.keyboardShown) {\n            setTimeout(function () {\n                returnAnimation();\n            }, 1);\n        }\n        else {\n            keyboardAnimation(false);\n            returnAnimation();\n        }\n        if (isOrientationChanging.current) {\n            setTimeout(function () {\n                isOrientationChanging.current = false;\n            }, 300);\n        }\n        if (initialValue.current > 100) {\n            if (lock.current)\n                return;\n            animations.underlayTranslateY.setValue(100);\n        }\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'hidden';\n            document.documentElement.style.overflowY = 'hidden';\n        }\n    }, [\n        snapPoints,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n        opacityAnimation,\n        returnAnimation,\n        keyboardAnimation,\n        animations.translateY,\n        animations.underlayTranslateY,\n        dimensions.portrait,\n    ]);\n    var getRef = useCallback(function () { return ({\n        show: function (snapIndex) {\n            var _a;\n            if (typeof snapIndex === 'number') {\n                currentSnapIndex.current = snapIndex;\n            }\n            onBeforeShow === null || onBeforeShow === void 0 ? void 0 : onBeforeShow();\n            (_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.initialNavigation();\n            setVisible(true);\n        },\n        hide: function (data) {\n            hideSheet(undefined, data, true);\n        },\n        setModalVisible: function (_visible) {\n            if (_visible) {\n                setVisible(true);\n            }\n            else {\n                hideSheet();\n            }\n        },\n        snapToOffset: function (offset) {\n            initialValue.current =\n                actionSheetHeight.current +\n                    minTranslateValue.current -\n                    (actionSheetHeight.current * offset) / 100;\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToRelativeOffset: function (offset) {\n            if (offset === 0) {\n                getRef().snapToIndex(currentSnapIndex.current);\n                return;\n            }\n            var availableHeight = actionSheetHeight.current + minTranslateValue.current;\n            initialValue.current =\n                initialValue.current + initialValue.current * (offset / 100);\n            if (initialValue.current > availableHeight) {\n                getRef().snapToOffset(100);\n                return;\n            }\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToIndex: function (index) {\n            if (index > snapPoints.length || index < 0)\n                return;\n            currentSnapIndex.current = index;\n            initialValue.current = getNextPosition(index);\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n            notifySnapIndexChanged();\n        },\n        handleChildScrollEnd: function () {\n            console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n        },\n        modifyGesturesForLayout: function (_id, layout, scrollOffset) {\n            //@ts-ignore\n            gestureBoundaries.current[_id] = __assign(__assign({}, layout), { scrollOffset: scrollOffset });\n        },\n        currentSnapIndex: function () { return currentSnapIndex.current; },\n        isGestureEnabled: function () { return gestureEnabled; },\n        isOpen: function () { return visible; },\n        ev: internalEventManager\n    }); }, [\n        internalEventManager,\n        setVisible,\n        hideSheet,\n        animations.translateY,\n        props.openAnimationConfig,\n        snapPoints.length,\n        getNextPosition,\n        gestureEnabled,\n        visible,\n        onBeforeShow,\n        notifySnapIndexChanged,\n    ]);\n    useImperativeHandle(ref, getRef, [getRef]);\n    useEffect(function () {\n        if (sheetId) {\n            SheetManager.registerRef(sheetId, currentContext, {\n                current: getRef()\n            });\n        }\n    }, [currentContext, getRef, sheetId]);\n    var onRequestClose = React.useCallback(function () {\n        var _a, _b;\n        if (enableRouterBackNavigation && ((_a = routerRef.current) === null || _a === void 0 ? void 0 : _a.canGoBack())) {\n            (_b = routerRef.current) === null || _b === void 0 ? void 0 : _b.goBack();\n            return;\n        }\n        if (visible && closeOnPressBack) {\n            hideSheet();\n        }\n    }, [hideSheet, enableRouterBackNavigation, closeOnPressBack, visible]);\n    var rootProps = React.useMemo(function () {\n        var _a, _b;\n        return isModal && !props.backgroundInteractionEnabled\n            ? {\n                visible: true,\n                animationType: 'none',\n                testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n                supportedOrientations: SUPPORTED_ORIENTATIONS,\n                onShow: props.onOpen,\n                onRequestClose: onRequestClose,\n                transparent: true,\n                /**\n                 * Always true, it causes issue with keyboard handling.\n                 */\n                statusBarTranslucent: true\n            }\n            : {\n                testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n                onLayout: function () {\n                    var _a;\n                    hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n                    (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n                },\n                style: {\n                    position: 'absolute',\n                    zIndex: zIndex\n                        ? zIndex\n                        : sheetId\n                            ? getZIndexFromStack(sheetId, currentContext)\n                            : 999,\n                    width: '100%',\n                    height: initialWindowHeight.current\n                },\n                pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled)\n                    ? 'box-none'\n                    : 'auto'\n            };\n    }, [\n        currentContext,\n        isModal,\n        onHardwareBackPress,\n        onRequestClose,\n        props,\n        zIndex,\n        sheetId,\n    ]);\n    var renderRoute = useCallback(function (route) {\n        var _a;\n        var RouteComponent = route.component;\n        return (<Animated.View key={route.name} style={{\n                display: route.name !== ((_a = router.currentRoute) === null || _a === void 0 ? void 0 : _a.name) ? 'none' : 'flex',\n                opacity: animations.routeOpacity\n            }}>\n            <RouterParamsContext.Provider value={route === null || route === void 0 ? void 0 : route.params}>\n              <RouteComponent router={router} params={route === null || route === void 0 ? void 0 : route.params} payload={payloadRef.current}/>\n            </RouterParamsContext.Provider>\n          </Animated.View>);\n    }, [animations.routeOpacity, router]);\n    var getPaddingBottom = function () {\n        var _a, _b, _c, _d, _e;\n        if (!props.useBottomSafeAreaPadding && !props.containerStyle)\n            return 0;\n        var topPadding = !props.useBottomSafeAreaPadding\n            ? 0\n            : Platform.OS === 'android'\n                ? StatusBar.currentHeight && StatusBar.currentHeight > 35\n                    ? 35\n                    : StatusBar.currentHeight\n                : (safeAreaPaddingTop.current || 0) > 30\n                    ? 30\n                    : safeAreaPaddingTop.current;\n        if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n            return (((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) ||\n                props.containerStyle.padding ||\n                0);\n        }\n        if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n            return topPadding;\n        }\n        if (typeof ((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string')\n            return props.containerStyle.paddingBottom;\n        if (typeof ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string')\n            return props.containerStyle.padding;\n        if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.paddingBottom;\n        }\n        if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.padding;\n        }\n        return topPadding;\n    };\n    var paddingBottom = getPaddingBottom() || 0;\n    var context = {\n        ref: panHandlerRef,\n        eventManager: internalEventManager\n    };\n    return (<>\n        {Platform.OS === 'ios' && !safeAreaInsets ? (<SafeAreaView pointerEvents=\"none\" collapsable={false} onLayout={function (event) {\n                var height = event.nativeEvent.layout.height;\n                if (height !== undefined) {\n                    safeAreaPaddingTop.current = height;\n                    clearTimeout(onDeviceLayoutReset.current.timer);\n                    onDeviceLayoutReset.current.timer = setTimeout(function () {\n                        internalEventManager.publish('safeAreaLayout');\n                    }, 64);\n                }\n            }} style={{\n                position: 'absolute',\n                width: 1,\n                left: 0,\n                top: 0,\n                backgroundColor: 'transparent'\n            }}>\n            <View />\n          </SafeAreaView>) : null}\n\n        {visible ? (<Root {...rootProps}>\n            <GestureHandlerRoot isModal={isModal} style={styles.parentContainer}>\n              <PanGestureRefContext.Provider value={context}>\n                <DraggableNodesContext.Provider value={draggableNodesContext}>\n                  <Animated.View onLayout={onDeviceLayout} ref={deviceContainerRef} pointerEvents={(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'} style={[\n                styles.parentContainer,\n                {\n                    opacity: animations.opacity,\n                    width: '100%',\n                    justifyContent: 'flex-end',\n                    transform: [\n                        {\n                            translateY: animations.keyboardTranslate\n                        },\n                    ]\n                },\n            ]}>\n                    {!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? (<TouchableOpacity onPress={onTouch} activeOpacity={defaultOverlayOpacity} testID={(_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop} style={{\n                    height: dimensions.height +\n                        (safeAreaPaddingTop.current || 0) +\n                        100,\n                    width: '100%',\n                    position: 'absolute',\n                    backgroundColor: overlayColor,\n                    opacity: defaultOverlayOpacity\n                }} {...(props.backdropProps ? props.backdropProps : {})}/>) : null}\n\n                    <Animated.View pointerEvents=\"box-none\" style={__assign(__assign({ borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10, borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10, backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white', borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) ||\n                    undefined, borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) ||\n                    undefined, borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined, width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%' }, getElevation(typeof elevation === 'number' ? elevation : 5)), { flex: undefined, height: dimensions.height, maxHeight: dimensions.height, paddingBottom: keyboard.keyboardShown\n                    ? keyboard.keyboardHeight || 0\n                    : 0, \n                //zIndex: 10,\n                transform: [\n                    {\n                        translateY: animations.translateY\n                    },\n                ] })}>\n                      {dimensions.height === 0 ? null : (<PanGestureHandler {...panHandlers} ref={panHandlerRef}>\n                          <Animated.View {...handlers.panHandlers} onLayout={onSheetLayout} ref={panViewRef} testID={(_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet} style={[\n                    styles.container,\n                    {\n                        borderTopRightRadius: 10,\n                        borderTopLeftRadius: 10\n                    },\n                    props.containerStyle,\n                    {\n                        paddingBottom: keyboard.keyboardShown &&\n                            typeof paddingBottom !== 'string'\n                            ? paddingBottom + 2\n                            : paddingBottom,\n                        maxHeight: keyboard.keyboardShown\n                            ? dimensions.height - keyboard.keyboardHeight\n                            : dimensions.height\n                    },\n                ]}>\n                            {drawUnderStatusBar ? (<Animated.View style={{\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) ||\n                            'white',\n                        width: '100%',\n                        borderTopRightRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        borderTopLeftRadius: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.borderRadius) || 10,\n                        transform: [\n                            {\n                                translateY: animations.underlayTranslateY\n                            },\n                        ]\n                    }}/>) : null}\n                            {gestureEnabled || props.headerAlwaysVisible ? (props.CustomHeaderComponent ? (props.CustomHeaderComponent) : (<Animated.View style={[\n                        styles.indicator,\n                        props.indicatorStyle,\n                    ]}/>)) : null}\n\n                            {(router === null || router === void 0 ? void 0 : router.hasRoutes()) ? (<RouterContext.Provider value={router}>\n                                {router === null || router === void 0 ? void 0 : router.stack.map(renderRoute)}\n                              </RouterContext.Provider>) : (props === null || props === void 0 ? void 0 : props.children)}\n                          </Animated.View>\n                        </PanGestureHandler>)}\n\n                      {overdrawEnabled ? (<Animated.View style={{\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.backgroundColor) || 'white',\n                    width: ((_q = props.containerStyle) === null || _q === void 0 ? void 0 : _q.width) || dimensions.width\n                }}/>) : null}\n                    </Animated.View>\n                    {ExtraOverlayComponent}\n                    {props.withNestedSheetProvider}\n                    {sheetId ? (<SheetProvider context={\"$$-auto-\".concat(sheetId, \"-\").concat(currentContext, \"-provider\")}/>) : null}\n                  </Animated.View>\n                </DraggableNodesContext.Provider>\n              </PanGestureRefContext.Provider>\n            </GestureHandlerRoot>\n          </Root>) : null}\n      </>);\n});\nvar GestureHandlerRoot = function (props) {\n    return props.isModal ? (<GestureHandlerRootView style={props.style}>\n      {props.children}\n    </GestureHandlerRootView>) : (<>{props.children}</>);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}